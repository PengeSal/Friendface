<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="data:image/jpeg;base64,{{ logo }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title id="titleyay">Friendface︱Post</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow-x: hidden;
            background: #f0f2f5;
            font-family: Helvetica, arial;
            
            
        }

        .pfp{
            background: white;
            width: 100vw;
            height: 64px;
            font-size: 13px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.3);
            top: 0;
            position: fixed;
            z-index: 999999999;
        }

        ::-webkit-scrollbar {
            width: 17px;
        }

        ::-webkit-scrollbar-track {
            background: #f0f2f5;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #caccd0;
            border-radius: 10px;
            border: 5px solid #f0f2f5;
        }

        #search-form {
            display: flex;
            align-items: center;
            padding: 12px;
        }

        #search-input {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 16px;
            background: #f0f2f5;
            width: 200px; 

            border: 2px solid #f0f2f5;
            color: black;
            border-radius: 0px 35px 35px 0px;
            outline: none;
            box-shadow: none;
            transition: width 0.75s;
            
            height: 1px;
            padding-top: 50px;

            
        }

        #search-input::placeholder {
            color: #787a80;
        }

        #search-button {
            cursor: pointer;
            color: rgb(124, 127, 136);
            font-family: Helvetica, Arial, sans-serif;
            font-size: 26px;
            background: #f0f2f5;
            width: 40px;
            border: 3px solid #f0f2f5;
            border-radius: 35px 0px 0px 35px;
            outline: none; 
            text-align: right;
            height: 40px;
            z-index: 99999999999999;
            
        }

        .evenmainerbox {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, calc(-50% + 64px));
            display: flex;
            justify-content: center;
            width: 100vw;
            min-height: calc(100vh + 1px);
        }

        .mainbox{
            position: absolute;
            width: 1280px;

            background: white;
            box-sizing: border-box;
            line-height: 35px;
            max-width: 100vw; 
        }

        .mainbox2{
            position: absolute;
            width: 1280px;

            background: white;
            line-height: 35px;
            max-width: 100vw; 

            border-radius: 10px;
        }

    </style>
    <script>

    

        //addEventListener("DOMContentLoaded", (event) => {
        (function (){
            function swapElementColors(element, mouseover) {
                    const computedStyle = getComputedStyle(element);
                    let color = computedStyle.color;
    
                    mouseover2 = mouseover
    
                    if (mouseover2 == "yes"){
                        var transition = computedStyle.transition;
                        element.style.transition = "none"
                    }
                    
    
                    if (color === 'rgb(255, 255, 255)') { 
                        element.style.color = 'rgb(33, 33, 33)';
                    } else if (color === 'rgb(0, 0, 0)') {
                        element.style.color = 'rgb(254, 254, 254)';
                    } else if (color === 'rgb(240, 242, 245)') {
                        element.style.color = 'rgb(23, 23, 23)';
                    } else if (color === 'rgb(202, 204, 208)') {
                        element.style.color = 'rgb(55, 55, 55)';
                    } else if (color === 'rgb(120, 122, 128)') {
                        element.style.color = 'rgb(180, 180, 180)';
                    }
    
                    let backgroundColor = computedStyle.backgroundColor;
    
                    if (backgroundColor === 'rgb(255, 255, 255)') { 
                        element.style.backgroundColor = 'rgb(33, 33, 33)';
                    } else if (backgroundColor === 'rgb(0, 0, 0)') { 
                        element.style.backgroundColor = 'rgb(254, 254, 254)';
                    } else if (backgroundColor === 'rgb(8, 102, 255)' || backgroundColor === 'rgb(57, 105, 251)') {
                        element.style.color = 'rgb(255, 255, 255)';
                    } else if (backgroundColor === 'rgb(240, 242, 245)') {
                        element.style.backgroundColor = 'rgb(23, 23, 23)';
                    } else if (backgroundColor === 'rgb(202, 204, 208)') {
                        element.style.backgroundColor = 'rgb(55, 55, 55)';
                    } else if (backgroundColor === 'rgb(120, 122, 128)') {
                        element.style.backgroundColor = 'rgb(180, 180, 180)';
                    }
    
                    let borderColor = computedStyle.borderColor;
                    let borderBottomColor = computedStyle.borderBottomColor;
                    let borderTopColor = computedStyle.borderTopColor;
                    let borderLeftColor = computedStyle.borderLeftColor;
                    let borderRightColor = computedStyle.borderRightColor;
    
                    if (borderColor === 'rgb(255, 255, 255)') { 
                        element.style.borderColor = 'rgb(33, 33, 33)';
                    } else if (borderColor === 'rgb(0, 0, 0)') { 
                        element.style.borderColor = 'rgb(254, 254, 254)';
                    } else if (borderColor === 'rgb(240, 242, 245)') {
                        element.style.borderColor = 'rgb(23, 23, 23)';
                    } else if (borderColor === 'rgb(202, 204, 208)') {
                        element.style.borderColor = 'rgb(55, 55, 55)';
                    } else if (borderBottomColor === 'rgb(202, 204, 208)') {
                        element.style.borderBottomColor = 'rgb(55, 55, 55)';
                    } else if (borderColor === 'rgb(120, 122, 128)') {
                        element.style.borderColor = 'rgb(180, 180, 180)';
                    } else if (borderBottomColor === 'rgb(240, 242, 245)') { 
                        element.style.borderBottomColor = 'rgb(23, 23, 23)';
                    } else if (borderTopColor === 'rgb(240, 242, 245)') { 
                        element.style.borderTopColor = 'rgb(23, 23, 23)';
                    } else if (borderBottomColor === 'rgb(255, 255, 255)') { 
                        element.style.borderBottomColor = 'rgb(33, 33, 33)';
                    } if (borderTopColor === 'rgb(240, 242, 245)') { 
                        element.style.borderTopColor = 'rgb(23, 23, 23)';
                    } if (borderRightColor === 'rgb(240, 242, 245)') { 
                        element.style.borderRightColor = 'rgb(23, 23, 23)';
                    } if (borderLeftColor === 'rgb(240, 242, 245)') { 
                        element.style.borderLeftColor = 'rgb(23, 23, 23)';
                    }
    
                    let boxShadow = computedStyle.boxShadow;
    
                    if (boxShadow === 'rgb(255, 255, 255)') { 
                        element.style.boxShadow = 'rgb(33, 33, 33)';
                    } else if (boxShadow === 'rgb(0, 0, 0)') { 
                        element.style.boxShadow = 'rgb(254, 254, 254)';
                    } else if (boxShadow === 'rgb(240, 242, 245)') {
                        element.style.boxShadow = 'rgb(23, 23, 23)';
                    } else if (boxShadow === 'rgb(202, 204, 208)') {
                        element.style.boxShadow = 'rgb(55, 55, 55)';
                    } else if (boxShadow === 'rgb(120, 122, 128)') {
                        element.style.boxShadow = 'rgb(180, 180, 180)';
                    }
    
                    if (mouseover2 == "yes"){
                        element.style.transition = transition
                    }
                    
                    
    
                }
            function swapColorsInDocumentDark() {
                
    
                const allElements = document.querySelectorAll('*');
    
    
                allElements.forEach(element => {
                    swapElementColors(element, "yes");
                    
                });
    
    
                
    
    
                var style = document.createElement('style');
    
                style.innerHTML = `
                ::-webkit-scrollbar {
                    width: 17px;
                }
    
                ::-webkit-scrollbar-track {
                    background: rgb(23, 23, 23);
                    border-radius: 10px;
                }
    
                ::-webkit-scrollbar-thumb {
                    background-color: rgb(55, 55, 55);
                    border-radius: 10px;
                    border: 5px solid rgb(23, 23, 23);
                }
                `;
    
                document.head.appendChild(style);
    
                
            }
    
    
            document.addEventListener('mousedown', function(event) {
                if (document.getElementById("darkmode").textContent == "yes") {
                    var element = event.target;
                    var parentElement = element.parentElement;
                    swapElementColors(element, "no");
                    swapElementColors(parentElement, "no");
                }
    
            });
    
            document.addEventListener('mouseover', function(event) {
                if (document.getElementById("darkmode").textContent == "yes") {
                    swapColorsInDocumentDark();
                }
                document.removeEventListener('mouseover', arguments.callee);
                document.addEventListener('mouseover', function(event) {
                    if (document.getElementById("darkmode").textContent == "yes") {
                        var element = event.target;
                        var parentElement = element.parentElement;
                        swapElementColors(element, "no");
                        swapElementColors(parentElement, "no");
                        swapElementColors(parentElement.parentElement, "no");
                        swapElementColors(parentElement.parentElement.parentElement, "no");
                        swapElementColors(parentElement.parentElement.parentElement.parentElement, "no");
                        element.querySelectorAll('*').forEach(function(child) {
                            swapElementColors(child, "no");
                        });
                        
                    }
                });
            });
    
            document.addEventListener('mouseout', function(event) {
                if (document.getElementById("darkmode").textContent == "yes") {
                    swapColorsInDocumentDark();
                }
                document.removeEventListener('mouseout', arguments.callee); 
                document.addEventListener('mouseout', function(event) {
                    if (document.getElementById("darkmode").textContent == "yes") {
                        var element = event.target;
                        var parentElement = element.parentElement;
                        swapElementColors(element, "no");
                        swapElementColors(parentElement, "no");
                        swapElementColors(parentElement.parentElement, "no");
                        swapElementColors(parentElement.parentElement.parentElement, "no");
                        swapElementColors(parentElement.parentElement.parentElement.parentElement, "no");
                        element.querySelectorAll('*').forEach(function(child) {
                            swapElementColors(child, "no");
    
                        });
                    }
                });
            });
    
            document.addEventListener('DOMContentLoaded', (event) => {
                if (document.getElementById("darkmode").textContent == "yes") {
                    swapColorsInDocumentDark();
                }
                if (document.getElementById("darkmode").textContent == "no") {
                    document.getElementById("link").style.background = "#ebf1ff";
                } else {
                    document.getElementById("link").style.background = "#1b2745";
                }
    
    
                var observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === Node.ELEMENT_NODE) {
                                console.log("blue swade shosw");
                                if (document.getElementById("darkmode").textContent == "yes") {
    
                                    swapElementColors(node, "no");
                                    node.querySelectorAll('*').forEach(function(child) {
                                        swapElementColors(child, "no");
                                    });
                                }
                            }
                        });
                    });
                });
    
                observer.observe(document.body, { childList: true, subtree: true });
            });
    
    
            
    
            
        })();
    
    
    </script>

</head>
<body>
    <div id="darkmode" style="display: none;">{{ dark_mode }}</div>

    <div style="width: 100vw; justify-content: center; display: flex; background-color: blue; height: 0px;">
        <div id="splash" style="float: right; z-index: 999999999999; background-color: white; 
        text-align: center; cursor: default; transition: transform 0.3s; width: 375px; border-radius: 15px; position: fixed; top: 0;
        line-height: 40px; color: #787a80;">{{ splashmessage }}</div>


        <script>
            function repeat(){
                if (window.innerWidth < 1100) {
                    document.getElementById('splash').style.transform = 'translate(14vh, -100px)';
                } else if (window.innerWidth < 1400) {
                    document.getElementById('splash').style.transform = 'translate(14vh)';
                } else {
                    document.getElementById('splash').style.transform = 'translate(0px)';
                }
            }
            setInterval(repeat, 50)
        </script>
    </div>

    <div class="pfp">
        
        <img
            id="uploadButton"
            style="width: 50px; height: 50px; cursor: pointer; padding: 7px 15px 8px 15px; float: right; object-fit: cover; border-radius: 50%; transition: filter 0.3s;"
            src="data:image/jpeg;base64,{{ profile_picture }}"
            alt=":(">

            <script>
                if (!navigator.userAgent.includes("Firefox")) {
                    document.getElementById("uploadButton").style.marginRight = "15px";
                }
                

                document.getElementById("uploadButton").onclick = function (event) {
                    event.stopPropagation(); 

                    var existingdropdown = document.querySelector('.delete-dropdown2');
                    if (existingdropdown) {
                        document.body.removeChild(existingdropdown);
                    }

                    var confirmdeletebutton = document.createElement("button");
                    confirmdeletebutton.textContent = "Profile";
                    confirmdeletebutton.style.backgroundColor = "#f0f2f5";
                    confirmdeletebutton.style.border = "0px solid white";
                    confirmdeletebutton.style.color = "#787a80";
                    confirmdeletebutton.style.padding = "5px";
                    confirmdeletebutton.style.fontSize = "16px";
                    confirmdeletebutton.style.width = "150px";
                    confirmdeletebutton.style.borderRadius = "5px";
                    confirmdeletebutton.style.cursor = "pointer";
                    confirmdeletebutton.style.marginBottom = "5px";
                    

                    var confirmdeletebutton2 = document.createElement("button");
                    confirmdeletebutton2.textContent = "Settings";
                    confirmdeletebutton2.style.backgroundColor = "#f0f2f5";
                    confirmdeletebutton2.style.border = "0px solid white";
                    confirmdeletebutton2.style.color = "#787a80";
                    confirmdeletebutton2.style.padding = "5px";
                    confirmdeletebutton2.style.fontSize = "16px";
                    confirmdeletebutton2.style.width = "150px";
                    confirmdeletebutton2.style.borderRadius = "5px";
                    confirmdeletebutton2.style.cursor = "pointer";

                    var deletedropdown = document.createElement("div");
                    deletedropdown.classList.add('delete-dropdown2'); 
                    deletedropdown.style.position = "absolute";
                    deletedropdown.style.top = (event.clientY + window.pageYOffset + 10) + "px"; 
                    deletedropdown.style.left = event.clientX - 150 + "px";
                    deletedropdown.style.backgroundColor = "white";
                    deletedropdown.style.boxShadow = "0 0 5px rgba(0, 0, 0, 0.35)";
                    deletedropdown.style.borderBottom = "3px solid #caccd0"
                    deletedropdown.style.padding = "8px";
                    deletedropdown.style.zIndex = "9999999999999999999999999999";
                    deletedropdown.style.borderRadius = "8px";
                    deletedropdown.style.width = "150px";

                    deletedropdown.appendChild(confirmdeletebutton);
                    deletedropdown.appendChild(confirmdeletebutton2);


                    document.body.appendChild(deletedropdown);

                    deletedropdown.style.overflow = "hidden"

                    deletedropdown.style.height = "0px"; 
                    deletedropdown.style.transition = "height 0.2s"; 
                    requestAnimationFrame(() => {
                        deletedropdown.style.height = deletedropdown.scrollHeight - 15 + "px";
                    });

                    window.addEventListener('scroll', function () {
                        document.body.removeChild(deletedropdown);
                        document.removeEventListener('click', handleclickoutside);
                    });

                    try {
                    document.querySelector(".actualposts3").addEventListener('scroll', function () {
                        document.body.removeChild(deletedropdown);
                        document.removeEventListener('click', handleclickoutside);
                    });
                    } catch {
                        console.log("skibidi")
                    }

                    confirmdeletebutton.onclick = function () {
                        var url = "/users/" + document.getElementById("user_id_div").textContent + "/posts"

                        window.location.href = url

                        
                    };
                    confirmdeletebutton2.onclick = function () {
                        var url = "/settings"

                        window.location.href = url
                    };


                    confirmdeletebutton.onmouseover = function() {
                        confirmdeletebutton.style.backgroundColor = "#caccd0";
                    };
                    confirmdeletebutton.onmouseout = function() {
                        confirmdeletebutton.style.backgroundColor = "#f0f2f5";
                    };

                    confirmdeletebutton2.onmouseover = function() {
                        confirmdeletebutton2.style.backgroundColor = "#caccd0";
                    };
                    confirmdeletebutton2.onmouseout = function() {
                        confirmdeletebutton2.style.backgroundColor = "#f0f2f5";
                    };

                    function handleclickoutside(event) {
                        if (!deletedropdown.contains(event.target)) {
                            console.log("young sheldon")
                            document.body.removeChild(deletedropdown);
                            document.removeEventListener('click', handleclickoutside); 
                        }
                    }

                    document.addEventListener('click', handleclickoutside);
                };

            </script>


        

        
        <form id="accountform" action="/users/{{ user_id }}/posts" method="get">
            <div id="user_id_div" style="display: none;">{{ user_id}}</div>
            <div class="name" onclick="submitname()"  title="Your Account" style="float: right; font-family: Helvetica, arial;  font-size: 20px;">
                <p id="yourname">{{ profile_text }}</p>
            </div>
        </form>






        
        <form id="accountform" action="/" method="post">
            <img title="Friendface"


            class="uploadButton"
            style="width: 50px; height: 50px; cursor: pointer; padding: 7px 0px 0px 15px; float: left; object-fit: cover;"
            src="data:image/jpeg;base64,{{ logo }}"
            alt=":(">

            <div class="logo" onclick="" title="Friendface" style="float: left; color: #0866ff; font-family: Helvetica, arial; cursor: pointer; padding: 0px 10px 2px 1px;">
                <h1>riendface</h1>

                <script>
                    document.querySelector(".logo").onclick = function() {
                        window.location.href = "/home/feed";
                    }
                    document.querySelector(".uploadButton").onclick = function() {
                        window.location.href = "/home/feed";
                    }
                </script>
            </div>
        </form>


        
        <form id="search-form" action="/searchusers" method="get">
            <div id="search-container" style="border-radius: 35px;">
                <button type="submit" id="search-button">⌕</button>
                <input type="text" id="search-input" name="search" placeholder="Search Users" style="padding: 10px 10px 10px 0px;" title="Search Friendface">

                <script>
                    if (navigator.userAgent.includes("Firefox")) {
                        document.getElementById("search-input").style.transform = "translate(-4px, -6px)";
                    } else {
                        document.getElementById("search-input").style.transform = "translate(-4px, -2px)";
                    }
                
                    document.getElementById("search-container").style.height = "42px";
                    document.getElementById("search-container").style.backgroundColor = "#f0f2f5";
                    document.getElementById("search-container").style.transition = "box-shadow 0.75s";
                
                    document.getElementById("search-container").onmouseover = function() {
                        document.getElementById("search-input").style.width = "300px";
                        document.getElementById("search-container").style.boxShadow = "0 0 5px rgba(0, 0, 0, 0.35)";
                    }
                
                    document.getElementById("search-container").onmouseout = function() {
                        if (!document.getElementById("search-input").matches(":focus")) {
                            document.getElementById("search-input").style.width = "200px";
                            document.getElementById("search-container").style.boxShadow = "none";
                        }
                    }
                
                    document.getElementById("search-input").addEventListener("blur", function() {
                        document.getElementById("search-input").style.width = "200px";
                        document.getElementById("search-container").style.boxShadow = "none";
                    });
                </script>
                
                
            </div>
        </form>

        



        <script>
            function submitname() {
              document.getElementById('accountform').submit();
            }
        </script>


        <style>
            .name{
                padding: 1px 0px 0px 0px;
                font-size: 12px;
                color: rgb(124, 127, 136);
                float: right;
                cursor: pointer;
                
            }
            .name:hover{
                color: rgb(163, 165, 172);
            }
        </style>

    </div>

    <input type="file" id="fileInput" style="display: none">
    

    <script>
        // THIS CODE IS STOLEN AF
        // THIS CODE IS STOLEN AF
        // THIS CODE IS STOLEN AF
        // THIS CODE IS STOLEN AF
        // THIS CODE IS STOLEN AF
        // THIS CODE IS STOLEN AF
        
        function triggerFileInput() {
            document.getElementById('fileInput').click();
        }

        document.getElementById('fileInput').addEventListener('change', function () {
            var fileInput = document.getElementById('fileInput');
            var file = fileInput.files[0];
            var reader = new FileReader();

            reader.onload = function (e) {
                var imageData = e.target.result.split(',')[1];
                sendImageData(imageData);
            };

            reader.readAsDataURL(file);
        });

        function sendImageData(imageData) {
            var xhr = new XMLHttpRequest();
            var url = '/home/feed';
            var data = 'imageData=' + encodeURIComponent(imageData);

            xhr.open('POST', url, true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.responseText);

                    location.reload();
                }
            };

            xhr.send(data);
        }
    </script>



    <!-- <h1>User Profile</h1>
    <p>HELLO {{ theirname }}!</p> -->

    <div class="evenmainerbox" id="thecodewasstolen" style="background-color: white;">
        <script>
            if (navigator.userAgent.includes("Firefox")) {
                console.log("You are using Firefox");
            } else {
                document.querySelector(".evenmainerbox").style.transform = "translate(-50%, calc(-50% + 64px))";
            }
        </script>  
        <div class="mainbox" style="position: relative; height: 100%; overflow: hidden; border-radius: 0px 0 10px 10px; border-bottom: 2px solid #caccd0; 
            border-left: 2px solid #f0f2f5; border-right: 2px solid #f0f2f5;">

            <div class="background-blur" style="position: absolute; top: 0; background-position: center center;
            left: 0; width: 100%; height: 100%; filter: blur(15px) brightness(50%); pointer-events: none;
            background: url('data:image/jpeg;base64,{{ image }}') center/cover; "></div>





            <div id="container" style="position: relative; z-index: 1;">
                <div id="isreply" style="display: none;">{{ isreply }}</div>
                <div id="replying_to" style="display: none;">{{ replying_to }}</div>

                
                
                <div id="shame2" style="background-color: white; width: 100vw; max-width: 1276px; float: left; 
                    border-radius: 0 0 10px 0; z-index: 9999; float: left;">
                    <img onclick="visit('{{ theirid }}')" id="theirprofilepicture" src="data:image/jpeg;base64,{{ pfp }}" style="height: 65px; width: 65px; 
                    border-radius: 50%; margin: 10px 8px 0px 18px; cursor: pointer; float: left; object-fit: cover;">

                    <p id="theirid" style="display: none;">{{ theirid }}</p>
                    <p id="yourid" style="display: none;">{{ user_id }}</p>
 
                    <div style="float: right; width: calc(100vw - 350px); max-width: 20px;">
                        <button id="link" style="cursor: pointer; color: #0866ff; float: right;
                        max-width: 200px; width: calc(100vw - 350px); background: #ebf1ff; 
                        margin-right: 20px; border: 0px solid white; min-width: 150px;
                        border-radius: 5px; font-size: 16px; height: 30px; margin-top: 10px;">Replying to ...</button>

                        <button id="edit" style="cursor: pointer; color: #787a80; float: right;
                        max-width: 200px; width: calc(100vw - 350px); background: #f0f2f5; 
                        margin-right: 20px; border: 0px solid white; min-width: 150px;
                        border-radius: 5px; font-size: 16px; height: 30px; margin-top: 10px;">Edit</button>
                    </div>

                    <script>
                        if (document.getElementById("isreply").textContent != "yes"){
                            document.getElementById("link").style.display = "none";
                        }
                        document.getElementById("link").onclick = function () {
                            window.location.href = "/posts/" + document.getElementById("replying_to").textContent
                        };
                        

                        document.getElementById("link").onmouseover = function() {
                            if (document.getElementById("darkmode").textContent == "no") {
                                this.style.background = "#c9daff";
                            } else {
                                this.style.background = "#273c6b";
                            }
                        };

                        document.getElementById("link").onmouseout = function() {
                            if (document.getElementById("darkmode").textContent == "no") {
                                this.style.background = "#ebf1ff";
                            } else {
                                this.style.background = "#1b2745";
                            }
                        };


                        if (parseInt(document.getElementById("theirid").textContent) != parseInt(document.getElementById("yourid").textContent)){
                            document.getElementById("edit").style.display = "none";
                        }

                        document.getElementById("edit").onclick = function(){
                            console.log("bruhg")
                            update()
                        }; 

                        document.getElementById("edit").onmouseover = function() {
                            document.getElementById("edit").style.backgroundColor = "#caccd0";
                        };

                        document.getElementById("edit").onmouseout = function() {
                            document.getElementById("edit").style.backgroundColor = "#f0f2f5";
                        };



                        


                        

                        


                    </script>


                    <div style="float: left; height: 80px;">
                        <p style="cursor: pointer; font-size: 20px; transform: translate(0, -6px);" onclick="visit('{{ theirid }}')">{{ theirname }}</p>
                        <p style="font-size: 14px; transform: translate(0, -40px); color: #787a80;">{{ date }}</p>
                    </div>
                    <textarea id="shame" readonly style="background-color: red; border: 0px solid red; max-height: calc(70vh - 500px); min-height: 75px;
                    width: calc(100% - 49px); resize: none; outline: none; background-color: white; 
                    position: relative; font-family: Arial; font-size: 16px; margin-top: 5px; height: auto; float: left; margin-left: 20px; margin-bottom: 10px;">{{ message }}</textarea>

                    <textarea id="shame3" readonly style="display: none;">{{ message }}</textarea>

                    <div id="thisisadiv">
                    </div>

                    <div id="likesdiv">
                        <hr id="dictator" style="width: 100%;">

                        <p style="float: right; height: 0; transform: translate(-25px, -25px); font-size: 18px; color: #787a80;">{{ views }} Views</p>

                        <button class="like" style="float: left; margin: 0px 0px 0px 20px; border: 0px solid white; color: white; padding: 3px;
                        font-size: 14px; border-radius: 5px; background-color: #0866ff; width: 80px; cursor: pointer;"><i id="likeicon" class="fa-solid fa-thumbs-up" style="padding-right: 5px;"></i>Like</button>

                        <button class="dislike" style="float: left; margin: 0px calc(100% - 350px) 0px 7px; border: 0px solid white; color: white; padding: 3px;
                        font-size: 14px; border-radius: 5px; background-color: #0866ff; width: 80px; cursor: pointer;"><i id="dislikeicon" class="fa-solid fa-thumbs-down fa-flip-horizontal" style="padding-left: 5px;"></i>Dislike</button>


                        <p class="like02" style="width: 79px; margin: 0px 0px 2px 23px; float: left; line-height: 18px; font-size: 14px; color: #787a80;">{{ likes }}</p>
                        <p class="dislike02" style="width: 73px; margin: 0px 0px 2px 7px; float: left; line-height: 18px; font-size: 14px; color: #787a80;">{{ dislikes }}</p>

                        <div id="clickme666" style="display: none;" onclick="{{ likebutton }}"></div>
                        <div id="clickme667" style="display: none;" onclick="{{ dislikebutton }}"></div>

                        <script>
                            window.addEventListener('scroll', function () {
                                const background = document.querySelector('.background-blur');
                                const scroll = window.scrollY;

                                
                                background.style.backgroundPosition = 'center ' + 'calc(50% + ' + scroll * 0.55 + 'px)';
                            });
                        </script>

                        


                    </div>

                    <script>
                        function matchAndRemoveYoutubeUrls(text) {
                            var p = /(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/g;
                            var matches = [];
                            var match;
                            while ((match = p.exec(text)) !== null) {
                                matches.push(match[1]);
                            }
                            var cleanedText = text.replace(p, '');
                            return { matches: matches.length > 0 ? matches : false, cleanedText: cleanedText };
                        }

                        var result = matchAndRemoveYoutubeUrls(text = document.getElementById("shame").value);

                        match = result.matches[0]

                        if (match != undefined) {
                            var video = document.createElement("iframe");
                            video.id = "video"
                            video.src = "https://www.youtube.com/embed/" + match
                            video.width = "100%";
                            video.height = "400px"
                            video.setAttribute('frameborder', '0');
                            video.setAttribute('allowfullscreen', '');

                        }

                        console.log("Cleaned Text:", result.cleanedText);

                        document.getElementById("shame").textContent = result.cleanedText.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'").replace(/^\s+/, '');
                        document.getElementById("shame").style.height = document.getElementById("shame").scrollHeight + "px";




                        if (match != undefined) {
                            document.getElementById("thisisadiv").appendChild(video);
                            document.getElementById("dictator").style.display = "none";

                        }

                        function update2(video) {
                            document.getElementById("dictator").style.display = "none";

                            document.getElementById("shame").removeAttribute('readonly');
                            document.getElementById("shame").style.borderRadius = "5px";
                            document.getElementById("shame").style.outline = "auto";
                            document.getElementById("shame").focus();
                            document.getElementById("edit").textContent = "Commit Changes"


                            document.getElementById("shame").onclick = function() {
                                this.value = document.getElementById("shame3").textContent.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'");
                                this.style.height = 'auto'; 
                                this.style.height = this.scrollHeight - 4 + "px"; 
                                
                                document.getElementById("shame").onclick = function() {
                                    console.log("nada")
                                }
                            };
                            document.getElementById("shame").click();

                            
                            try {
                                document.getElementById("thisisadiv").removeChild(video);
                            } catch {
                                console.log("nuh uh")
                            }

                            document.getElementById("shame").oninput = function() {
                                
                                this.value = this.value.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'");

                                this.style.height = 'auto'; 
                                this.style.height = this.scrollHeight - 4 + "px"; 
                                
                            };
 

                            document.getElementById("edit").onclick = function() {
                                document.getElementById("shame3").textContent = document.getElementById("shame").value


                                var result = matchAndRemoveYoutubeUrls(text = document.getElementById("shame3").value);

                                match = result.matches[0]


                                document.getElementById("thisisadiv").innerHTML = "";
                                document.getElementById("dictator").style.display = "none";

                                if (match != undefined) {
                                    var video = document.createElement("iframe");
                                    video.id = "video"
                                    video.src = "https://www.youtube.com/embed/" + match
                                    video.width = "100%";
                                    video.height = "400px"
                                    video.setAttribute('frameborder', '0');
                                    video.setAttribute('allowfullscreen', '');


                                    document.getElementById("thisisadiv").appendChild(video);
                                    document.getElementById("dictator").style.display = "none";

                                } else {
                                    var hr = document.createElement("hr");
                                    hr.style.width = "100vw";

                                    
                                    document.getElementById("thisisadiv").appendChild(hr);
                                }



                                console.log("Cleaned Text:", result.cleanedText);


                                document.getElementById("shame").setAttribute('readonly', true);
                                document.getElementById("shame").style.outline = "none";
                                
                                document.getElementById("edit").textContent = "Edit"

                                
                                document.getElementById("shame").onclick = function() {
                                    this.value = result.cleanedText.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'");
                                    this.style.height = 'auto'; 
                                    this.style.height = this.scrollHeight - 4 + "px"; 
                                    
                                    document.getElementById("shame").onclick = function() {
                                        console.log("nada")
                                    }
                                };
                                document.getElementById("shame").click();

                                document.getElementById("shame").blur();


                                
                                var xhr = new XMLHttpRequest();

                                var parts = window.location.href.split("/");
                                var lastPart = parts[parts.length - 1];      

                                var url = '/edit_post/message/' + lastPart
                                var data = 'imageData=' + document.getElementById("shame3").textContent

                                xhr.open('POST', url, true);
                                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                                xhr.onreadystatechange = function() {
                                    if (xhr.readyState == 4 && xhr.status == 200) {
                                        console.log(xhr.responseText);
                                        
                                    }
                                };

                                xhr.send(data);




                                

                                document.getElementById("aboutsectionedit2").value = "";
                                document.getElementById("imageinput").value = "";
                                document.getElementById("choosephotobutton").style.background = "white";
                                document.getElementById('p').style.mixBlendMode = "normal";

                                    
                                
                                
                                
                                document.getElementById("edit").onclick = function(){
                                    update2(video)
                                }; 
                                


                            }
                            
                        };

                        function update(){
                            update2(video);
                        }

                    </script>


                    
                    


                    <script>
                        async function likepost(post_id, likestate) {
                            try {
                                const response = await fetch(`/like/${likestate}/${post_id}`, { method: 'POST' });
                                if (!response.ok) {
                                    throw new Error('Network response was not ok.');
                                }
                                const data = await response.text();
                                console.log(data);
                            } catch (error) {
                                console.error('Error:', error);
                            }
                        }

                        async function dislikepost(post_id, likestate) {
                            try {
                                const response = await fetch(`/dislike/${likestate}/${post_id}`, { method: 'POST' });
                                if (!response.ok) {
                                    throw new Error('Network response was not ok.');
                                }
                                const data = await response.text();
                                console.log(data);
                            } catch (error) {
                                console.error('Error:', error);
                            }
                        }
                        
                        function entertainment(image){
                            var byteCharacters = atob(image);
                            var byteNumbers = new Array(byteCharacters.length);
                            for (var i = 0; i < byteCharacters.length; i++) {
                                byteNumbers[i] = byteCharacters.charCodeAt(i);
                            }
                            var byteArray = new Uint8Array(byteNumbers);
                            var blob = new Blob([byteArray], { type: 'image/jpeg' });
                            var imageUrl = URL.createObjectURL(blob);

                            window.open(imageUrl)
                        }
                        function visit(user_id){
                            console.log("log");
                            window.location.href = "/users/" + user_id + "/posts";
                        }


                        function clicklike() {
                            console.log("LIKE IS CLICKING");
                                
                                
                            var likeElement = document.querySelector(".like");
                            var computedStyle = window.getComputedStyle(likeElement);
                            var backgroundColor = computedStyle.backgroundColor;

                            if (backgroundColor === "rgb(240, 242, 245)") {
                                console.log("LIKE IS CLICKING");
                                likeElement.click();
                            }
                        }

                        function clickdislike() {
                            console.log("DISLIKE IS CLICKING");
                            var dislikeElement = document.querySelector(".dislike");
                            var computedStyle = window.getComputedStyle(dislikeElement);
                            var backgroundColor = computedStyle.backgroundColor;

                            if (backgroundColor === "rgb(240, 242, 245)") {
                                console.log("DISLIKE IS CLICKING");
                                dislikeElement.click();
                            }
                        }


                        function clicklike() {
                            console.log("LIKE IS CLICKING");

                            var likeElement = document.querySelector(".like");
                            var computedStyle = window.getComputedStyle(likeElement);
                            var backgroundColor = computedStyle.backgroundColor;

                            if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                console.log("LIKE IS CLICKING");
                                likeElement.click();
                            }
                        }

                        function clickdislike() {
                            console.log("DISLIKE IS CLICKING");

                            var dislikeElement = document.querySelector(".dislike");
                            var computedStyle = window.getComputedStyle(dislikeElement);
                            var backgroundColor = computedStyle.backgroundColor;

                            if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                console.log("DISLIKE IS CLICKING");
                                dislikeElement.click();
                            }
                        }


                        function likebutton(likers, your_id, post_id, likes){
                            console.log("SOMETHING IS HAPPENING?!?!?!")
                            var like = document.querySelector(".like");
                            var likeicon = document.getElementById("likeicon");
                            if (likers.split("_LIKERS_").includes(String(your_id))) {
                                if (document.getElementById("darkmode").textContent == "yes"){
                                    like.style.color = "rgb(180, 180, 180)";
                                    like.style.backgroundColor = "rgb(23, 23, 23)";
                                    likeicon.style.backgroundColor = "rgb(23, 23, 23)";
                                    likeicon.style.color = "rgb(180, 180, 180)";
                                } else {
                                    like.style.color = "#787a80";
                                    like.style.backgroundColor = "#f0f2f5";
                                    likeicon.style.backgroundColor = "#f0f2f5";
                                    likeicon.style.color = "#787a80";
                                }
                            } else {
                                like.style.color = "white";
                                like.style.backgroundColor = "#0866ff";
                                likeicon.style.backgroundColor = "#0866ff";
                                likeicon.style.color = "white";

                            }

                            if (likers.split("_LIKERS_").includes(String(your_id))) {
                                like.onclick = function() { 
                                    function blue() {
                                        likepost(post_id, "unlike");
                                        document.querySelector(".like02").textContent = parseInt(likes) - 1;
                                        document.querySelector(".like" ).style.backgroundColor = "#0866ff";
                                        document.getElementById("likeicon").style.backgroundColor = "#0866ff";

                                        document.querySelector(".like" ).style.color = "white";
                                        document.getElementById("likeicon").style.color = "white";

                                        document.querySelector(".like").onclick = function() {
                                            clickdislike();
                                            likepost(post_id, "like");
                                            document.querySelector(".like02").textContent = parseInt(likes) + 1 - 1;
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".like").style.backgroundColor = "#f0f2f5";
                                                document.getElementById("likeicon").style.backgroundColor = "#f0f2f5";
                                            } else {
                                                document.querySelector(".like").style.backgroundColor = "rgb(23, 23, 23)";
                                                document.getElementById("likeicon").style.backgroundColor = "rgb(23, 23, 23)";
                                            }

                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".like").style.color = "#787a80";
                                                document.getElementById("likeicon").style.color = "#787a80";
                                            } else {
                                                document.querySelector(".like").style.color = "rgb(180, 180, 180)";
                                                document.getElementById("likeicon").style.color = "rgb(180, 180, 180)";
                                            }
                                            document.querySelector(".like").onclick = function() {
                                                
                                                blue();
                                            }
                                        }
                                    }
                                    blue();
                                };
                            } else {
                                like.onclick = function() { 
                                    function grey() {
                                        clickdislike();
                                        likepost(post_id, "like");
                                        document.querySelector(".like02").textContent = parseInt(likes) + 1;
                                        if (document.getElementById("darkmode").textContent == "no") {
                                            document.querySelector(".like").style.backgroundColor = "#f0f2f5";
                                            document.getElementById("likeicon").style.backgroundColor = "#f0f2f5";
                                        } else {
                                            document.querySelector(".like").style.backgroundColor = "rgb(23, 23, 23)";
                                            document.getElementById("likeicon").style.backgroundColor = "rgb(23, 23, 23)";
                                        }

                                        if (document.getElementById("darkmode").textContent == "no") {
                                            document.querySelector(".like" ).style.color = "#787a80";
                                            document.getElementById("likeicon").style.color = "#787a80";
                                        } else {
                                            document.querySelector(".like" ).style.color = "rgb(180, 180, 180)";
                                            document.getElementById("likeicon").style.color = "rgb(180, 180, 180)";
                                        }
                                        
                                        document.querySelector(".like").onclick = function() {
                                            likepost(post_id, "unlike");
                                            document.querySelector(".like02" ).textContent = parseInt(likes) + 1 - 1;
                                            document.querySelector(".like").style.backgroundColor = "#0866ff";
                                            document.getElementById("likeicon").style.backgroundColor = "#0866ff";

                                            document.querySelector(".like").style.color = "white";
                                            document.getElementById("likeicon").style.color = "white";
                                            document.querySelector(".like").onclick = function() {
                                                grey();
                                            }
                                        }
                                    }
                                    grey();
                                };
                            }
                        }

                        function dislikebutton(dislikers, your_id, post_id, dislikes){
                            console.log("SOMETHING IS HAPPENING?!?!?!")
                            var dislike = document.querySelector(".dislike");
                            var dislikeicon = document.getElementById("dislikeicon");
                            if (dislikers.split("_DISLIKERS_").includes(String(your_id))) {
                                if (document.getElementById("darkmode").textContent == "yes"){
                                    dislike.style.color = "rgb(180, 180, 180)";
                                    dislike.style.backgroundColor = "rgb(23, 23, 23)";
                                    dislikeicon.style.backgroundColor = "rgb(23, 23, 23)";
                                    dislikeicon.style.color = "rgb(180, 180, 180)";
                                } else {
                                    dislike.style.color = "#787a80";
                                    dislike.style.backgroundColor = "#f0f2f5";
                                    dislikeicon.style.backgroundColor = "#f0f2f5";
                                    dislikeicon.style.color = "#787a80";
                                }
                            } else {
                                dislike.style.color = "white";
                                dislike.style.backgroundColor = "#0866ff";
                                dislikeicon.style.backgroundColor = "#0866ff";
                                dislikeicon.style.color = "white";

                            }



                            if (dislikers.split("_DISLIKERS_").includes(String(your_id))) {
                                dislike.onclick = function() { 
                                    function disblue() {
                                        dislikepost(post_id, "undislike");
                                        document.querySelector(".dislike02").textContent = parseInt(dislikes) - 1;

                                        document.querySelector(".dislike").style.backgroundColor = "#0866ff";
                                        document.getElementById("dislikeicon").style.backgroundColor = "#0866ff";

                                        document.querySelector(".dislike").style.color = "white";
                                        document.getElementById("dislikeicon").style.color = "white";

                                        document.querySelector(".dislike" ).onclick = function() {
                                            clicklike();
                                            dislikepost(post_id, "dislike");
                                            document.querySelector(".dislike02").textContent = parseInt(dislikes) + 1 - 1;
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".dislike").style.backgroundColor = "#f0f2f5";
                                                document.getElementById("dislikeicon").style.backgroundColor = "#f0f2f5";
                                            } else {
                                                document.querySelector(".dislike").style.backgroundColor = "rgb(23, 23, 23)";
                                                document.getElementById("dislikeicon").style.backgroundColor = "rgb(23, 23, 23)";
                                            }

                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".dislike").style.color = "#787a80";
                                                document.getElementById("dislikeicon").style.color = "#787a80";
                                            } else {
                                                document.querySelector(".dislike").style.color = "rgb(180, 180, 180)";
                                                document.getElementById("dislikeicon").style.color = "rgb(180, 180, 180)";
                                            }
                                            document.querySelector(".dislike").onclick = function() {
                                                
                                                disblue();
                                            }
                                        }
                                    }
                                    disblue();
                                };
                            } else {
                                dislike.onclick = function() { 
                                    function disgrey() {
                                        clicklike();
                                        dislikepost(post_id, "dislike");
                                        document.querySelector(".dislike02").textContent = parseInt(dislikes) + 1;
                                        if (document.getElementById("darkmode").textContent == "no") {
                                            document.querySelector(".dislike").style.backgroundColor = "#f0f2f5";
                                            document.getElementById("dislikeicon").style.backgroundColor = "#f0f2f5";
                                        } else {
                                            document.querySelector(".dislike").style.backgroundColor = "rgb(23, 23, 23)";
                                            document.getElementById("dislikeicon").style.backgroundColor = "rgb(23, 23, 23)";
                                        }

                                        if (document.getElementById("darkmode").textContent == "no") {
                                            document.querySelector(".dislike").style.color = "#787a80";
                                            document.getElementById("dislikeicon").style.color = "#787a80";
                                        } else {
                                            document.querySelector(".dislike").style.color = "rgb(180, 180, 180)";
                                            document.getElementById("dislikeicon").style.color = "rgb(180, 180, 180)";
                                        }
                                        

                                        document.querySelector(".dislike").onclick = function() {
                                            
                                            dislikepost(post_id, "undislike");
                                            document.querySelector(".dislike02").textContent = parseInt(dislikes) + 1 - 1;
                                            
                                        
                                            document.querySelector(".dislike").style.backgroundColor = "#0866ff";
                                            document.getElementById("dislikeicon").style.backgroundColor = "#0866ff";

                                            document.querySelector(".dislike").style.color = "white";
                                            document.getElementById("dislikeicon").style.color = "white";


                                            document.querySelector(".dislike").onclick = function() {
                                                
                                                disgrey();
                                            }
                                        }
                                    }
                                    disgrey();
                                };
                            }
                        }


                        
                    </script>
                    <!-- <script>
                        var containerimg = document.getElementById('containerimg');
                        var shame = document.getElementById('shame2');
                        var resizeTimeout;

                        window.addEventListener('resize', function() {
                            if (containerimg.clientHeight < shame.clientHeight) {
                                containerimg.style.height = shame.clientHeight + 'px';
                            } else if (containerimg.clientHeight == shame.clientHeight) {
                                containerimg.style.height = "100%";
                            }

                        });
                    </script> -->
                </div>

                <div id="mormonsbelike" style="transition: width 0.3s; width: 0px; background-color: rgb(255, 255, 255); height: 100px; margin: auto; float: right; display: flex; flex-direction: column;">
                    <div>
                        <h2 style="line-height: 16px; margin-left: 17px; float: left;">Comments</h2>
                        <p style="float: left; padding-left: 5px; font-size: 20px; line-height: 0; transform: translate(0, 7px);" id="comments_amount"></p>
                    </div>
                
                    <button id="commentsclickme" onclick="{{ commentslist }}" style="display: none;"></button>
                    <hr style="width: 100%; margin: 0;">
                
                    <div id="mormonsbelike2" style="overflow-y: scroll; flex: 1;">
                        
                    </div>
                    



                    <div style="height: 20px;"></div> 
                    <div id="post_id" style="display: none;">{{ post_id }}</div>



                    <input id="commentbar" style="margin-top: auto; outline: none; width: calc(100% - 58px); padding-right: 15px; font-size: 16px;
                background-color: #f0f2f5; margin-left: 17px; margin-bottom: 17px; border: none; padding: 10px; padding-left: 15px; border-radius: 25px;"
                placeholder="Leave a Comment" required></input>

                <script>
                    document.getElementById("commentbar").addEventListener("input", function(event) {
                        if (this.value.length > 1000) {
                            this.value = this.value.slice(0, 75);
                        }
                    });

                    increment = 0


                    document.getElementById("commentbar").addEventListener("keyup", function(event) {
                        if (event.keyCode === 13) {
                            if (document.getElementById("commentbar").value != "") {
                                var xhr = new XMLHttpRequest();

                                var currentUrl = window.location.href;
                                var urlParts = currentUrl.split('/');
                                var lastPart = urlParts[urlParts.length - 1];
                                console.log(lastPart);

                                var url = '/addcomment/' + document.getElementById("post_id").textContent;
                                var data = 'imageData=' + document.getElementById("commentbar").value;

                                xhr.open('POST', url, true);
                                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                                xhr.onreadystatechange = function() {
                                    if (xhr.readyState == 4 && xhr.status == 200) {
                                        console.log(xhr.responseText);
                                    }
                                };

                                xhr.send(data);

                                increment = increment - 1;

                                try {
                                    document.querySelector(".commentmae").style.display = "none";
                                }
                                catch (error) {
                                    console.log("womp womp");
                                }


                                var newDiv = document.createElement('div');
                                var invite_text2 = document.createElement("P");
                                var invite_text = document.createElement("P");
                                var invite_text3 = document.createElement("P");
                                var image = document.createElement("img");

                                var thingdiv = document.createElement("div");
                                thingdiv.className = "friending2" + increment;


                                var clearDiv = document.createElement("div");
                                clearDiv.style.clear = "both";





                                newDiv.style.fontSize = "20px";
                                newDiv.style.backgroundColor = 'white';
                                newDiv.style.padding = '24px 24px 0 15px';
                                newDiv.className = "friending" + increment;
                                newDiv.style.borderRadius = "0px";
                                newDiv.style.minHeight = "40px";
                                newDiv.style.height = "fit-content";
                                newDiv.style.overflow = "hidden";


                                var user_id = document.getElementById("yourid").textContent




                                invite_text2.textContent = document.getElementById("yourname").textContent
                                if (document.getElementById("yourid").textContent == document.getElementById("theirid").textContent) {
                                    invite_text2.textContent = document.getElementById("yourname").textContent.trim();

                                    var authorSpan = document.createElement("span");
                                    authorSpan.textContent = " (Author)";
                                    authorSpan.style.color = "#787a80";

                                    invite_text2.appendChild(authorSpan);
                                }
                                invite_text2.style.lineHeight = "0px";
                                invite_text2.style.transform = "translate(-1px, -17px)";
                                invite_text2.style.cursor = "pointer";
                                invite_text2.style.float = "left";
                                invite_text2.style.fontSize = "21px";





                                invite_text.textContent = document.getElementById("commentbar").value
                                invite_text.style.lineHeight = "17px";
                                invite_text.style.width = "50%";
                                invite_text.style.fontSize = "17px";
                                invite_text.style.transform = "translate(50px, -25px)";
                                invite_text.style.whiteSpace = "normal";
                                invite_text.style.wordWrap = "break-word";



                                
                                

                                image.style.width = "40px";
                                image.style.height = "40px";
                                image.style.marginRight = "10px";
                                image.style.borderRadius = "50%";
                                image.src = document.getElementById("uploadButton").src
                                image.style.transform = "translate(0, -12.5px)";
                                image.style.float = "left";
                                image.style.cursor = "pointer";
                                image.style.objectFit = "cover"

                                



                                document.getElementById("mormonsbelike2").prepend(newDiv);
                                
                                

                                document.querySelector(".friending" + increment).appendChild(thingdiv);
                                document.querySelector(".friending2" + increment).appendChild(image);
                                document.querySelector(".friending2" + increment).appendChild(invite_text2);
                                document.querySelector(".friending" + increment).appendChild(clearDiv);
                                document.querySelector(".friending" + increment).appendChild(invite_text);


                                (function(index, user_id, your_id) {
                                    newDiv.onmouseover = function() {
                                        this.style.backgroundColor = "#f0f2f5";
                                        if (user_id == String(your_id)) {
                                            if (document.getElementById("darkmode").textContent == "yes"){
                                                document.querySelector(".decline" + index).style.backgroundColor = "rgb(55, 55, 55)";
                                            } else {
                                                document.querySelector(".decline" + index).style.backgroundColor = "#caccd0";
                                            }
                                        }
                                    };

                                    newDiv.onmouseout = function() {
                                        this.style.backgroundColor = "white";
                                        if (user_id == String(your_id)) {
                                            if (document.getElementById("darkmode").textContent == "yes"){
                                                document.querySelector(".decline" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                            } else {
                                                document.querySelector(".decline" + index).style.backgroundColor = "#f0f2f5";
                                            }
                                        }
                                    };


                                    image.onclick = function () {
                                        window.location.href = "/users/" + user_id + "/posts";
                                    };

                                    invite_text2.onclick = function() {
                                        window.location.href = "/users/" + user_id + "/posts";
                                    };


                                })(increment, user_id, document.getElementById("yourid").textContent);



                                document.getElementById("commentbar").value = "";

                                number = document.getElementById("comments_amount").textContent.replace(")", "").replace("(", "")
                                number = parseInt(number)
                                number = number + 1
                                

                                document.getElementById("comments_amount").textContent = "(" + number + ")"
                            }
                        }
                    });
                </script>




                    

                    <style>
                        #commentbar::placeholder {
                            color: #787a80;
                        }
                    </style>
                </div>
                

                
                


            </div>
            

        
            <script>
                
            </script>
        


                


                



                <div id="container img">

                    
                </div>
                
            
            </div>
            




            <style>
                hr {  
                    height: 2px;  
                    background-color: #caccd0;  
                    border: none;  
                }  
            </style>

            <!-- <div class="theirname" style="font-size: 100px;"><p>HELLO {{ theirname }}!</p></div> -->

            <!-- <h1>HELLO {{ theirname }}!</h1> -->


            


        </div>
        
        

    </div>
    

    <div class="posts" style="height: calc(100% - 15px); position: absolute; background: #f0f2f5; width: 100vw; overflow: hidden; bottom: 0; transition: transform 0.3s;">
        <div style="background-color: white; width: 100vw;">

            
            






            <div id="giggle" style="height: 45px; max-width: 1280px; width: 100vw; background-color: rgb(255, 255, 255); margin: auto;">
                
                

                <div style="max-width: 1280px; width: 100vw; background-color: white;">
                    <button class="actionbutton sharebutton" style="width: calc(100% / 3);background-color: white; color: #787a80; border: none; border-bottom: none; height: 35px; border-bottom: 2px solid white; float: right; font-size: 18px; cursor: pointer;">
                        <i id="shareicon" class="fa-solid fa-share-from-square" style="padding-right: 5px;"></i>Share
                    </button>
                    <script>
                        document.querySelector('.sharebutton').onclick = function() {
                            var url = window.location.href;
                            console.log(url);
                
                            var input = document.createElement('input');
                            input.style.position = 'fixed';
                            input.style.opacity = 0;
                            input.value = url;
                            document.body.appendChild(input);
                            input.select();
                            document.execCommand('copy');
                            document.body.removeChild(input);
                
                            document.querySelector('.sharebutton').innerHTML = '';
                            var icon = document.createElement('i');
                            icon.classList.add('fa-solid', 'fa-square-check');
                            icon.style.paddingRight = "5px";
                            document.querySelector('.sharebutton').appendChild(icon);
                
                            var text = document.createTextNode('Copied Link!');
                            document.querySelector('.sharebutton').appendChild(text);
                
                            function delay() {
                                document.querySelector('.sharebutton').innerHTML = '';
                                var icon = document.createElement('i');
                                icon.classList.add('fa-solid', 'fa-share-from-square');
                                icon.style.paddingRight = "5px";
                                document.querySelector('.sharebutton').appendChild(icon);
                
                                var text = document.createTextNode('Share');
                                document.querySelector('.sharebutton').appendChild(text);
                            }
                
                            setTimeout(delay, 1000);
                        };
                    </script>
                
                    <button class="actionbutton commentbutton" style="width: calc(100% / 3);background-color: white; color: #787a80; border: none; border-bottom: none; height: 35px; border-bottom: 2px solid white; float: right; font-size: 18px; cursor: pointer;" onclick="revealcomments()">
                        <i id="commenticon" class="fa-solid fa-comment-dots" style="padding-right: 5px;"></i>Comments
                    </button>
                
                    <button class="actionbutton replybutton" style="width: calc(100% / 3);background-color: white; color: #787a80; border: none; border-bottom: none; height: 35px; border-bottom: 2px solid white; float: right; font-size: 18px; cursor: pointer;" onclick="createpost()">
                        <i id="replyicon" class="fa-solid fa-reply fa-flip-horizontal" style="padding-left: 5px;"></i>Reply
                    </button>
                
                    <script>
                        document.querySelectorAll('.actionbutton').forEach(button => {
                            button.onmouseover = function() {
                                this.style.color = "#0866ff";
                                this.style.borderBottom = "2px solid #0866ff";
                                this.firstElementChild.style.color = "#0866ff";
                            }
                            button.onmouseout = function() {
                                this.style.color = "#787a80";
                                this.style.borderBottom = "2px solid white";
                                this.firstElementChild.style.color = "#787a80";
                                
                            }
                        });

                        if ("{{ friends_only }}" == "yes"){
                            document.getElementById("titleyay").textContent = "Friendface | Friends Only"
                            document.querySelector(".replybutton").onmouseover = function() {
                                this.style.color = "#787a80";
                                this.style.borderBottom = "2px solid white";
                                this.firstElementChild.style.color = "#787a80";
                            }

                            document.querySelector(".replybutton").onclick = function() {}
                            document.querySelector(".replybutton").style.cursor = "not-allowed"
                            
                            document.querySelector(".replybutton").innerHTML = document.querySelector(".replybutton").innerHTML + " (Friends Only)"
                            document.getElementById(".hiddenfornow").remove()
                    
                        }

                    </script>
                </div>
                

                <style>
                    #search-input2 {
                        font-family: Helvetica, Arial, sans-serif;
                        font-size: 16px;
                        background: #f0f2f5;
                        width: 200px;
                        padding: 10px 10px 10px 15px;
                        border: 2px solid #f0f2f5;
                        color: black;
                        border-radius: 10px;
                        outline: none;
                    }
                    #search-input2::placeholder {
                        color: #787a80;
                    }




                </style>


                <script>
                    function revealcomments() {
                        

                        document.getElementById("shame2").style.width = "calc(50% - 1px)";
                        document.getElementById("mormonsbelike").style.width = "calc(50% - 1px)";
                        if (document.getElementById("darkmode").textContent == "yes") {
                            document.getElementById("mormonsbelike").style.borderLeft = "2px solid rgb(23, 23, 23)";
                        } else {
                            document.getElementById("mormonsbelike").style.borderLeft = "2px solid #f0f2f5";
                        }
                        
                        document.getElementById("mormonsbelike").style.height = "50vh";

                        document.getElementById("shame").style.height = "0px"
                        document.getElementById("shame").style.height = document.getElementById("shame").scrollHeight - 4 + "px";
                        document.querySelector(".commentbutton").onclick = function() {
                            

                            document.getElementById("shame2").style.width = "100vw";
                            document.getElementById("mormonsbelike").style.width = "0px";
                            document.getElementById("mormonsbelike").style.borderLeft = "0px solid #f0f2f5";
                            document.getElementById("mormonsbelike").style.height = "0px";

                            document.getElementById("shame").style.height = "0px"
                            document.getElementById("shame").style.height = document.getElementById("shame").scrollHeight - 4 + "px";

                                
                            
                            
                            document.querySelector(".commentbutton").onclick = function() {
                                revealcomments();
                            }
                            
                        }


                    }

                    function createpost() {

                        document.querySelector(".hiddenfornow").style.display = "block";
                        document.querySelector(".actualposts").style.transform = "translate(0, 318px)";
                        document.querySelector(".posts").style.height = "calc(100% + 302px)";
                        document.querySelector(".replybutton").onclick = function() {
                            console.log("bruh");
                            document.querySelector(".posts").style.height = "calc(100% - 15px)";
                            document.querySelector(".actualposts").style.transform = "translate(0, 0px)";
                            document.querySelector(".replybutton").onclick = function() {
                                createpost()
                            }
                        }
                        
                    }

                    function deletecomment(comment_id, post_id) {
                        var xhr = new XMLHttpRequest();

                        var url = '/deletecomment/' + comment_id + "/" + post_id

                        xhr.open('POST', url, true);

                        xhr.onreadystatechange = function() {
                            if (xhr.readyState == 4 && xhr.status == 200) {
                                console.log(xhr.responseText);
                                
                            }
                        };

                        xhr.send("");
                    }


                    function displaycomments(messages, names, pfps, user_ids, commentids, your_id, post_id) {
                        var increment = 0;
                        var messagesarray = messages.split("_COMMENTS_").reverse();
                        var namesarray = names.split("_COMMENTS_").reverse();
                        var pfpsarray = pfps.split("_COMMENTS_").reverse();
                        var useridsarray = user_ids.split("_COMMENTS_").reverse();
                        var commentidsarray = commentids.split("_COMMENTS_").reverse();

                        var number = commentidsarray.length - 1;
                        document.getElementById("comments_amount").textContent = "(" + number + ")";

                        if (typeof namesarray[1] === "undefined") {
                            no_posts();
                        };

                        function no_posts() {
                            var newDiv2 = document.createElement('div');
                            var paragr = document.createElement('p');

                            newDiv2.style.borderRadius = "10px";
                            newDiv2.style.width = "100%";
                            newDiv2.style.height = "50px";
                            newDiv2.style.textAlign = "center";

                            newDiv2.className = "commentmae";

                            paragr.textContent = "No comment.";
                            paragr.style.transform = "translate(0, 25px)";
                            paragr.style.color = "#787a80";
                            paragr.style.lineHeight = "0";

                            document.getElementById("mormonsbelike2").appendChild(newDiv2);
                            document.querySelector(".commentmae").appendChild(paragr);
                        };

                        var arraylength = messagesarray.length;
                        for (var i = 0; i < arraylength; i++) {
                            increment = increment + 1;
                            if (increment != 1) {
                                var newDiv = document.createElement('div');
                                var invite_text2 = document.createElement("P");
                                var invite_text = document.createElement("P");
                                var invite_text3 = document.createElement("P");
                                var image = document.createElement("img");

                                var thingdiv = document.createElement("div");
                                thingdiv.className = "friending2" + increment;

                                var clearDiv = document.createElement("div");
                                clearDiv.style.clear = "both";

                                var text2 = namesarray[i];
                                var comment = messagesarray[i].replace(/_THISISANAPOSTROPHE_/g, "'");

                                newDiv.style.fontSize = "20px";
                                newDiv.style.backgroundColor = 'white';
                                newDiv.style.padding = '24px 24px 0 15px';
                                newDiv.className = "friending" + increment;
                                newDiv.style.borderRadius = "0px";
                                newDiv.style.minHeight = "40px";
                                newDiv.style.height = "fit-content";
                                newDiv.style.overflow = "hidden";

                                var div = document.createElement("div");
                                div.className = "friending3" + increment;

                                var user_id = useridsarray[i];

                                //name
                                invite_text2.textContent = text2;
                                console.log(useridsarray[i] + ", " + post_id)
                                if (useridsarray[i] == document.getElementById("theirid").textContent) {
                                    invite_text2.textContent = text2.trim();

                                    var authorSpan = document.createElement("span");
                                    authorSpan.textContent = " (Author)";
                                    authorSpan.style.color = "#787a80";

                                    invite_text2.appendChild(authorSpan);
                                }
                                invite_text2.style.lineHeight = "0px";
                                invite_text2.style.transform = "translate(-1px, -15px)";
                                invite_text2.style.cursor = "pointer";
                                invite_text2.style.float = "left";
                                invite_text2.style.fontSize = "21px";

                                invite_text.textContent = comment;
                                invite_text.style.lineHeight = "17px";
                                invite_text.style.width = "50%";
                                invite_text.style.fontSize = "17px";
                                invite_text.style.transform = "translate(50px, -25px)";
                                invite_text.style.whiteSpace = "normal";
                                invite_text.style.wordWrap = "break-word";

                                image.style.width = "40px";
                                image.style.height = "40px";
                                image.style.marginRight = "10px";
                                image.style.borderRadius = "50%";
                                image.src = "data:image/jpeg;base64," + pfpsarray[i];
                                image.style.transform = "translate(0, -12.5px)";
                                image.style.float = "left";
                                image.style.cursor = "pointer";
                                image.style.objectFit = "cover";
                                image.className = "image_comment" + commentidsarray[i];

                                newDiv.appendChild(div);
                                div.appendChild(thingdiv);
                                thingdiv.appendChild(image);
                                thingdiv.appendChild(invite_text2);
                                div.appendChild(clearDiv);
                                if (useridsarray[i] == String(your_id)) {
                                    var declinebutton = document.createElement('button');
                                    declinebutton.style.float = "right";
                                    declinebutton.className = "decline" + increment;
                                    declinebutton.style.height = "30px";
                                    declinebutton.textContent = "Delete";
                                    declinebutton.style.fontSize = "16px";
                                    declinebutton.style.color = "#787a80";
                                    declinebutton.style.backgroundColor = "#f0f2f5";
                                    declinebutton.style.border = "0px";
                                    declinebutton.style.margin = "0px 0px 0px 0px";
                                    declinebutton.style.transform = "translate(0, -50px)";
                                    declinebutton.style.padding = "3px";
                                    declinebutton.style.width = "85px";
                                    declinebutton.style.borderRadius = "8px";
                                    declinebutton.style.cursor = "pointer";

                                    div.appendChild(declinebutton);

                                    declinebutton.onclick = (function(index, comment_id) {
                                        return function() {
                                            deletecomment(comment_id, post_id);
                                            document.getElementById("mormonsbelike2").removeChild(document.querySelector(".friending" + index));
                                            number = parseInt(document.getElementById("comments_amount").textContent.replace(")", "").replace("(", "")) - 1;
                                            document.getElementById("comments_amount").textContent = "(" + number + ")";
                                            commentidsarray = commentidsarray.filter(item => item !== comment_id);
                                            if (commentidsarray.length == 1 && document.getElementById("mormonsbelike2").innerHTML.trim() === '') {
                                                no_posts();
                                            }
                                        };
                                    })(increment, commentidsarray[i]);
                                }
                                
                                div.appendChild(invite_text);

                                document.getElementById("mormonsbelike2").appendChild(newDiv);

                                (function(index, user_id) {
                                    newDiv.onmouseover = function() {
                                        this.style.backgroundColor = "#f0f2f5";
                                        if (user_id == String(your_id)) {
                                            if (document.getElementById("darkmode").textContent == "yes"){
                                                document.querySelector(".decline" + index).style.backgroundColor = "rgb(55, 55, 55)";
                                            } else {
                                                document.querySelector(".decline" + index).style.backgroundColor = "#caccd0";
                                            }
                                        }
                                    };

                                    newDiv.onmouseout = function() {
                                        this.style.backgroundColor = "white";
                                        if (user_id == String(your_id)) {
                                            if (document.getElementById("darkmode").textContent == "yes"){
                                                document.querySelector(".decline" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                            } else {
                                                document.querySelector(".decline" + index).style.backgroundColor = "#f0f2f5";
                                            }
                                        }
                                    };

                                    image.onclick = function() {
                                        window.location.href = "/users/" + user_id + "/posts";
                                    };

                                    invite_text2.onclick = function() {
                                        window.location.href = "/users/" + user_id + "/posts";
                                    };
                                })(increment, user_id);
                            }
                        }

                        for (var i = 0; i < arraylength; i++) {
                            (function(index) {
                                if (index !== 0) {
                                    var post_id = useridsarray[index];
                                    var imagen = document.querySelector(".image_comment" + commentidsarray[index]);
                                    var url = '/get/pfp_comment/' + post_id;

                                    fetch(url)
                                        .then(response => {
                                            if (!response.ok) {
                                                throw new Error('you lose');
                                            }
                                            return response.text();
                                        })
                                        .then(image => {
                                            imagen.src = "data:image/jpeg;base64," + image;
                                        })
                                        .catch(error => {
                                            console.error('error fetching image for post id:', post_id, error);
                                        });
                                }
                            })(i);
                        }

                        document.getElementById("friendshouse").click();
                    }
                

                </script>

            </div>
        </div>


        
        <div style="height: 100vh; position: absolute; background: #f0f2f5; width: 100vw;">
            <div style="height: 2px; width: 100vw; background-color: #caccd0; z-index: 9999999999999999 !important;"></div>
            <style>
                .evenmainerbox2 {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50vw, calc(-50vh + 20px));
                    display: flex;
                    justify-content: center;
                    width: 100vw;
                    
                }
            </style>

            <div class="evenmainerbox2">
            

                <div class="mainbox2" style="height: 75px; border-bottom: 2px solid #caccd0;" title="New Post"> 

                    

                        

                        

                        <div class="hiddenfornow" style="background-color: white; overflow: hidden; position: absolute; width: 100%; display: flex;
                        border-radius: 10px; height: 297px; max-width: 1280px; border-bottom: 2px solid #caccd0;">

                        

                            <div style="float: left;">
                                <textarea id="aboutsectionedit2" rows="10" cols="42" style="font-family: Arial, Helvetica, sans-serif; resize: none; border-radius: 5px;
                                            border: 2px solid #caccd0; margin: 5px 0px 5px 20px; padding: 10px; margin-top: 20px; height: 177px; width: 380px;" 
                                            placeholder="Time to share your opinions online :/" name="message" required></textarea>
                                <script>
                        

                        

                                    document.getElementById("aboutsectionedit2").addEventListener('input', function() {
                                        var text = document.getElementById("aboutsectionedit2").value;
    
                                        var p = /(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/g;
                                        var matches = [];
                                        var match;

                                        while ((match = p.exec(text)) !== null) {
                                            matches.push(match[1]);
                                        }

                                        if (matches.length > 0) {
                                            document.getElementById("choosephotobutton").style.display = "none";
                                            document.getElementById('imageinput').value = ""
                                            
                                        } else {
                                            document.getElementById("choosephotobutton").style.display = "block";
                                        }
                                        
                                    });

                                </script>

                                
                                <br style="line-height: 0px;" />

                                <button id="postbutton"
                                    style="font-size: 16px; color: white; background-color: rgb(8, 102, 255); float: left;
                                    border: 0px; margin: 0px 0px 20px 20px; padding: 10px; width: 80px; 
                                    border-radius: 8px; cursor: pointer;">Reply
                                </button>

                                <div style="float: left; display: flex; align-items: center; transform: translate(0, -16px);
                                    justify-content: center;" title="Only your friends can see this post">
                                    <input id="friends_only" type="checkbox" style="float: left; margin: 7px; margin-left: 20px; width: 20px; height: 20px; accent-color: #0866ff;">
                                    <p style="float: left; font-size: 18px; cursor: default;">Friends Only</p>
                                </div>

                            </div>




                            

                            <div style="float: left;">
                                
                                <div onmouseover="this.style.filter='brightness(60%)'"
                                onmouseout="this.style.filter='brightness(100%)'" id="choosephotobutton" title="Import Photo" style="font-family: Arial, Helvetica, sans-serif; border-radius: 5px; font-size: 75px; 
                                    background-color: white; cursor: pointer; text-align: center; position: relative; transition: filter 0.3s;

                                    border: 2px solid #caccd0; margin: 5px 0px 5px 20px; margin-top: 20px; height: 197px; width: 197px; color: #caccd0;" 
                                    placeholder="Time to share your opinions online :/" name="desc" onclick="selectpicture()">
                                    <p id="p" style="font-family: Arial, Helvetica, sans-serif; font-size: 75px;
                                    color: #caccd0; transform: translate(0, 8px);">+</p>
                                </div>


                                <input type="file" id="fileInput3" style="display: none">

                                <script>
                                    document.getElementById("postbutton").onclick = function() {
                                        if (document.getElementById("aboutsectionedit2").value != "") {

                                            var xhr = new XMLHttpRequest();

                                            var currentUrl = window.location.href;
                                            var urlParts = currentUrl.split('/');
                                            var lastPart = urlParts[urlParts.length - 1];
                                            console.log(lastPart)

                                            if (document.getElementById("friends_only").checked) {
                                                var friends_only = "yes"
                                            } else {
                                                var friends_only = "no"
                                            }
            
                                            var url = '/createpost/reply/' + lastPart + "/" + friends_only
                                            var data = 'imageData=' + document.getElementById("aboutsectionedit2").value + "_SEPARATINGIMAGEDATAFROMMESSAGEDATA_" + document.getElementById("imageinput").value
            
                                            xhr.open('POST', url, true);
                                            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            
                                            xhr.onreadystatechange = function() {
                                                if (xhr.readyState == 4 && xhr.status == 200) {
                                                    console.log(xhr.responseText);

                                                    document.getElementById("newpost").click()

                                                    document.getElementById("aboutsectionedit2").value = "";
                                                    document.getElementById("imageinput").value = "";
                                                    if (document.getElementById("darkmode").textContent == "no"){
                                                        document.getElementById("choosephotobutton").style.background = "white";
                                                    } else {
                                                        document.getElementById("choosephotobutton").style.background = "rgb(33, 33, 33)";
                                                    }
                                                    document.getElementById('p').style.mixBlendMode = "normal";

                                                }
                                            };

                                            xhr.send(data);

                                            

                                            

                                        }
                                    }

                                    function selectpicture() {
                                        document.getElementById('fileInput3').click();
                                    }

                                    document.getElementById('fileInput3').addEventListener('change', function () {
                                        var fileInput = document.getElementById('fileInput3');
                                        var file = fileInput.files[0];
                                        var reader = new FileReader();

                                        reader.onload = function (e) {
                                            var imageData = e.target.result.split(',')[1];
                                            sendImageData3(imageData);
                                        };

                                        reader.readAsDataURL(file);
                                    });

                                    function sendImageData3(imageData) {
                                        var data = encodeURIComponent(imageData);

                                        document.getElementById('imageinput').value = data

                                        document.getElementById('p').style.mixBlendMode = "difference";
                                        document.getElementById('choosephotobutton').style.background = "url('data:image/jpeg;base64, " + data + "') center center / cover no-repeat";

                                    }
                                </script>
                                

                            </div>

                            <div style="float: left; display: none;">
                                <input name="image" id="imageinput"></input>

                            </div>
                        

                        

                        
                            
                        </div>




                    

                    


                    
                    
                </div>  
            
            


            </div>

            <div style="width: 100vw; align-items: center;">
                <div class="actualposts" style="transition: transform 0.3s; transform: translate(0, 0px); margin: auto; background-color: #f0f2f5; border-top: 20px solid #f0f2f5; max-width: 1280px;">
                    <div class="actualposts3" style="max-width: 1280px; background-color: #f0f2f5; transition: transform 0.3s; border-radius: 10px; height: calc(100vh - 100px); width: 100vw;
                    position: relative; overflow-y: scroll;">


                        <div style="max-width: 720px; width: calc(100% - 30px); background-color: white; float: right; border-radius: 10px; margin-bottom: 15px;
                        border-bottom: 2px solid #caccd0; padding: 0 15px 0 15px; line-height: 15px; z-index: 999;"><h2 style="float: left;">Replies</h2>

                        <p style="float: left; padding-left: 5px; font-size: 20px;" id="repliesamount"></p></div>

                        <div id="aboutsection" style="width: calc(100% - 770px); position: sticky; top: 0; background-color: #f0f2f5;
                        transition: transform 0.3s; overflow: hidden; float: left;">
                            <div id="parentDiv" style="width: 100%; background-color: white; float: left; border-radius: 10px; 
                                border-bottom: 2px solid #caccd0; line-height: 15px; overflow: hidden;">
                                    <h2 style="padding: 0 15px 0 15px;">{{ theirname }}</h2>

                                    <div style="width: 100%; aspect-ratio: 1/1; position: absolute; display: flex; justify-content: center; align-items: center;">

                                    <img onclick="visit('{{ theirid }}')" id="theirprofilepicture" src="data:image/jpeg;base64,{{ pfp }}" style="width: 55%; aspect-ratio: 1/1; object-fit: cover;
                                            border-radius: 50%;  cursor: pointer; float: left; border: 5px solid white;">

                                    </div>

                                    <div id="childDiv" style="width: 100%; aspect-ratio: 1/1; background: url('data:image/jpeg;base64, {{ theirbanner }}');
                                                                background-position: center center; z-index: 99999999; background-size: cover;">
                                    </div>
                                    

                                    <script>
                                        document.addEventListener("DOMContentLoaded", function() {
                                            var parentDiv = document.getElementById('parentDiv');
                                            var childDiv = document.getElementById('childDiv');
                                            
                                            function adjustParentHeight() {
                                                // Get the height of the child div
                                                var childHeight = childDiv.offsetHeight;
                                                // Set the parent div's height to match the child div's height
                                                parentDiv.style.height = childHeight + 55 + 'px';
                                            }
                                        
                                            // Adjust height once the content is loaded
                                            adjustParentHeight();
                                        
                                            // Optional: Adjust height on window resize to ensure responsiveness
                                            window.addEventListener('resize', adjustParentHeight);
                                        });
                                    </script>
                                

                            </div>
                            <p style="color: #787a80; margin-top: 15px; margin-left: 10px; line-height: 35px;">Copyright © Friendface Corporation 2024</p>
                            <p style="color: #787a80; margin-top: 15px; margin-left: 10px; line-height: 35px; transform: translate(0, -29px);">"Based" in British Virgin Islands</p>
                            
                        </div>
                        

                        <div id="everyday" onclick="{{ about }}" style="display: none;"></div>





                        <button id="clickme" style="display: none;" onclick="{{ displayposts }}"></button>

                        <div class="actualposts2" style="max-width: 750px; float: right; width: 100vw; height: calc(100vh - 100px); border-radius: 10px;">
                            <div id="newpostsarea">
                                
                            </div>
                        </div>

                        
                        
                        


                        <script>
                            window.onload = (event) => {

                                
                                function view() {
                                    var xhr = new XMLHttpRequest();

                                    var currentUrl = window.location.href;
                                    var urlParts = currentUrl.split('/');
                                    var lastPart = urlParts[urlParts.length - 1];

                                    var url = '/view/' + lastPart

                                    xhr.open('POST', url, true);
                                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                                    xhr.onreadystatechange = function () {
                                        if (xhr.readyState == 4 && xhr.status == 200) {
                                            console.log(xhr.responseText);

                                        }
                                    };

                                    xhr.send();
                                }

                                setTimeout(view, 5000);


                                document.getElementById('everyday').click();
                                document.querySelector(".actualposts3").style.overflowY = "hidden";

                                document.getElementById("commentsclickme").click()
                                document.getElementById("clickme666").click()
                                document.getElementById("clickme667").click()

                                // function replaceColor() {
                                //     var allElements = document.querySelectorAll('*');
                                    
                                //     allElements.forEach(function(element) {
                                //         var style = window.getComputedStyle(element);

                                //         if (style.color === "rgb(0, 0, 0)") {element.style.color = "rgb(254, 254, 254)";}
                                //         if (style.backgroundColor === "rgb(0, 0, 0)") {element.style.backgroundColor = "rgb(254, 254, 254)";}
                                //         if (style.borderColor === "rgb(0, 0, 0)") {element.style.borderColor = "rgb(254, 254, 254)";}
                                        
                                //         if (style.color === "rgb(255, 255, 255)") {element.style.color = "rgb(45,45,45)";}
                                //         if (style.backgroundColor === "rgb(255, 255, 255)") {element.style.backgroundColor = "rgb(45,45,45)";}
                                //         if (style.borderColor === "rgb(255, 255, 255)") {element.style.borderColor = "rgb(45,45,45)";}

                                //         if (style.color === "rgb(202, 204, 208)") {element.style.color = "rgb(65,65,65)";}
                                //         if (style.backgroundColor === "rgb(202, 204, 208)") {element.style.backgroundColor = "rgb(65,65,65)";}
                                //         if (style.borderColor === "rgb(202, 204, 208)") {element.style.borderColor = "rgb(65,65,65)";}

                                //         if (style.color === "rgb(240, 242, 245)") {element.style.color = "rgb(25,25,25)";}
                                //         if (style.backgroundColor === "rgb(240, 242, 245)") {element.style.backgroundColor = "rgb(25,25,25)";}
                                //         if (style.borderColor === "rgb(240, 242, 245)") {element.style.borderColor = "rgb(25,25,25)";}

                                        

                                        


                                //     });
                                // }

                                // replaceColor();
                                

                                

                                

                                    var string = "github.com/isaacgisby/lan-messager\n"
                                    if (document.getElementById("splash").textContent == string) {
                                        document.getElementById("splash").style.cursor = "pointer";
                                        document.getElementById("splash").onclick = function() {
                                            window.open("https://github.com/isaacgisby/lan-messager");
                                }}
                                if (document.getElementById("splash").textContent == "Now in colour!!!\n") {
                                    document.getElementById("splash").style.width = "125px";
                                    document.getElementById("splash").style.background = "linear-gradient(to right, red, orange, yellow, green, blue, indigo, purple)";
                                    document.getElementById("splash").style.fontWeight = "bold";
                                    document.getElementById("splash").style.paddingLeft = "none";
                                    document.getElementById("splash").style.paddingRight = "none";
                                    document.getElementById("splash").style.webkitBackgroundClip = "text";
                                    document.getElementById("splash").style.webkitTextFillColor = "transparent";
                                }














                            };

                            
                            
                            window.onscroll = function(ev) {
                                document.querySelector(".actualposts3").style.overflowY = "hidden";
                                if ((window.innerHeight + Math.round(window.scrollY)) >= document.documentElement.scrollHeight) {
                                    document.querySelector(".actualposts3").style.overflowY = "scroll";
                                    

                                } else {
                                    document.querySelector(".actualposts3").style.overflowY = "hidden";
                                    
                                }
                            };

                            function repeat() {
                                if (window.innerWidth < 950) {
                                    document.getElementById('aboutsection').style.transform = 'translate(-500px)';
                                } else {
                                    document.getElementById('aboutsection').style.transform = 'none';
                                }
                                
                            }
                            setInterval(repeat, 50)

                            

                            function displayposts(post_ids, names, messages, user_ids, profile_pictures, likes, dislikes,
                                comments_amounts, photos, times, likers, dislikers, replying_to, your_id, friends_only, friending) {

                                var increment = 0;




                                var post_ids = post_ids.split("_SEPARATOR_").reverse();
                                var names = names.split("_SEPARATOR_").reverse();
                                var messages = messages.split("_SEPARATOR_").reverse();
                                var user_ids = user_ids.split("_SEPARATOR_").reverse();
                                var profile_pictures = profile_pictures.split("_SEPARATOR_").reverse();
                                var likes = likes.split("_SEPARATOR_").reverse();
                                var dislikes = dislikes.split("_SEPARATOR_").reverse();
                                var comments_amounts = comments_amounts.split("_SEPARATOR_").reverse();
                                var photos = photos.split("_SEPARATOR_").reverse();
                                var times = times.split("_SEPARATOR_").reverse();
                                var likers = likers.split("_SEPARATOR_").reverse();
                                var dislikers = dislikers.split("_SEPARATOR_").reverse();
                                var replying_to = replying_to.split("_SEPARATOR_").reverse();
                                var your_id = your_id
                                var friends_only = friends_only.split("_SEPARATOR_").reverse();
                                var friending = friending.split("_SEPARATOR_").reverse();

                                console.log("NAMES: " + names[1]);

                                var number = post_ids.length - 1

                                document.getElementById("repliesamount").textContent = "(" + number + ")"

                                if (typeof names[1] === "undefined") {
                                    no_posts();
                                };


                                function no_posts() {
                                    var newDiv2 = document.createElement('div');
                                    var paragr = document.createElement('p');

                                    newDiv2.style.backgroundColor = "#f0f2f5";
                                    newDiv2.style.borderRadius = "10px";
                                    newDiv2.style.maxWidth = "746px";
                                    newDiv2.style.width = "100vw";
                                    newDiv2.style.border = "2px solid #caccd0";
                                    newDiv2.style.height = "100px";
                                    newDiv2.style.textAlign = "center";

                                    newDiv2.className = "maggiemae";

                                    paragr.textContent = "Irrelevant post";
                                    paragr.style.transform = "translate(0, 30px)";
                                    paragr.style.color = "#787a80";
                                    paragr.style.lineHeight = "0";

                                    document.querySelector(".actualposts2").appendChild(newDiv2);
                                    document.querySelector(".maggiemae").appendChild(paragr);
                                }


                                var arraylength = post_ids.length;
                                for (var i = 0; i < arraylength; i++) {
                                    increment = increment + 1;



                                    if (increment != 1) {

                                    

                                    function advert(increment) {
                                        if (friends_only[i] == "no") {
                                            var advertreal = document.createElement('div');
                                            var close = document.createElement('button');


                                            close.textContent = "✕"
                                            close.style.background = "white"
                                            close.style.fontSize = "10px"
                                            close.style.padding = "0"
                                            close.style.margin = "5px"
                                            close.style.float = "right"
                                            close.style.width = "20px"
                                            close.style.height = "20px"
                                            close.style.border = "1px outset"
                                            close.style.cursor = "pointer"

                                            

                                            advertreal.className = "advert" + increment;

                                            (function (index) {
                                                close.onclick = function () {
                                                    document.querySelector(".advert" + index).style.display = "none"; 
                                                };

                                            })(increment);

                                            advertreal.style.marginBottom = "15px";
                                            advertreal.style.background = "white";
                                            advertreal.style.height = "175px";
                                            if (!navigator.userAgent.includes("Firefox")) {
                                                advertreal.style.width = "calc(100% - 21px)";
                                                advertreal.style.transform = "translate(17px)"
                                            } else {
                                                advertreal.style.width = "calc(100% - 4px)";
                                            }
                                            advertreal.style.maxWidth = "746px"
                                            advertreal.style.border = "2px outset"
                                            advertreal.style.backgroundPosition = "center center"
                                            advertreal.style.backgroundSize = "cover"

                                            


                                            
                                            
                                            

                                            
                                            
                                            document.querySelector(".actualposts2").appendChild(advertreal);
                                            document.querySelector(".advert" + increment).appendChild(close);


                                            fetch('/get_random_advert')
                                                .then(response => {
                                                    if (!response.ok) {
                                                        throw new Error('Failed to fetch');
                                                    }
                                                    return response.text();
                                                })
                                                .then(image => {
                                                    console.log(image)
                                                    advertreal.style.background = "url('data:image/jpeg;base64, " + image + "')"

                                                    

                                                })
                                                .catch(error => {
                                                    console.error('Error fetching advert:', error);
                                                });
                                        }
                                    }


                                    var random = Math.floor(Math.random() * 4) + 1;

                                    if (random === 1) {
                                        if (increment != 2) {
                                            advert(increment);
                                        }
                                    }




                                    var newDiv = document.createElement('div');
                                    var invite_text2 = document.createElement("P");
                                    var link = document.createElement("button");
                                    var invite_text = document.createElement("textarea");

                                    var text = messages[i]
                                    var text2 = names[i]
                                    var time2 = times[i]


                                    newDiv.style.fontSize = "20px";
                                    newDiv.style.backgroundColor = 'white';
                                    newDiv.className = "post" + increment;
                                    newDiv.style.marginBottom = "15px";
                                    newDiv.style.borderRadius = "10px";
                                    newDiv.style.borderBottom = "2px solid #caccd0";


                                    newDiv.style.maxWidth = "750px";
                                    newDiv.style.width = "100vw";




                                    function deletepost(post_id, increment) {
                                        // try {
                                        //     document.getElementById("actualimage" + increment).style.display = "none";
                                        // } catch {
                                        //    console.log("ahhhhh")
                                        // }

                                        document.querySelector(".post" + increment).style.marginBottom = "0";
                                        document.querySelector(".post" + increment).style.borderBottom = "none";
                                        document.querySelector(".post" + increment).style.borderBottom = "none";
                                        document.querySelector(".post" + increment).style.height = document.querySelector(".post" + increment).scrollHeight + "px";
                                        document.querySelector(".post" + increment).style.overflow = "hidden";
                                        document.querySelector(".post" + increment).style.transition = "height 0.2s";
                                        requestAnimationFrame(() => {
                                            document.querySelector(".post" + increment).style.height = document.querySelector(".post" + increment).scrollHeight - document.querySelector(".post" + increment).scrollHeight + "0px";
                                        });

                                        number = document.getElementById("repliesamount").textContent.replace(")", "").replace("(", "")
                                        number = parseInt(number)
                                        number = number - 1


                                        document.getElementById("repliesamount").textContent = "(" + number + ")"

                                        console.log(post_ids.length)
                                        console.log(post_ids)
                                        console.log(post_id.toString())

                                        post_ids = post_ids.filter(item => item !== post_id);


                                        if (post_ids.length == 1) {
                                            if (document.getElementById("newpostsarea").innerHTML.trim() === '') {

                                                no_posts();

                                            }

                                        }


                                        var xhr = new XMLHttpRequest();

                                        var url = '/delete/' + post_id;

                                        xhr.open('POST', url, true);

                                        xhr.onreadystatechange = function() {
                                            if (xhr.readyState == 4 && xhr.status == 200) {
                                                console.log(xhr.responseText);

                                            }
                                        };

                                        xhr.send("");




                                    }

                                    async function likepost(post_id, likestate) {
                                        try {
                                            const response = await fetch(`/like/${likestate}/${post_id}`, { method: 'POST' });
                                            if (!response.ok) {
                                                throw new Error('Network response was not ok.');
                                            }
                                            const data = await response.text();
                                            console.log(data);
                                        } catch (error) {
                                            console.error('Error:', error);
                                        }
                                    }

                                    async function dislikepost(post_id, likestate) {
                                        try {
                                            const response = await fetch(`/dislike/${likestate}/${post_id}`, { method: 'POST' });
                                            if (!response.ok) {
                                                throw new Error('Network response was not ok.');
                                            }
                                            const data = await response.text();
                                            console.log(data);
                                        } catch (error) {
                                            console.error('Error:', error);
                                        }
                                    }

                                    var div = document.createElement("div");
                                    var image = document.createElement("img");
                                    var time = document.createElement("p");
                                    var actualimage = document.createElement("img");
                                    var deletebutton = document.createElement("button");
                                    var like = document.createElement("button");
                                    var dislike = document.createElement("button");

                                    like.className = "like" + increment;
                                    dislike.className = "dislike" + increment;

                                    var dislikeicon = document.createElement("i");
                                    dislikeicon.className = "dislikeicon" + increment

                                    var likeicon = document.createElement("i");
                                    likeicon.className = "likeicon" + increment

                                    var like2 = document.createElement("div");
                                    var dislike2 = document.createElement("div");

                                    var visit = document.createElement("button");

                                    (function (index, user_id, photo, post_id, likes, dislikes, likers, dislikers, replying_to) {
                                        invite_text2.onclick = function () {
                                            window.location.href = "/users/" + user_id + "/posts";
                                        };

                                        link.onclick = function () {
                                            window.location.href = "/posts/" + replying_to
                                        };

                                        link.onmouseover = function() {
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                this.style.background = "#c9daff";
                                            } else {
                                                this.style.background = "#273c6b";
                                            }
                                        };

                                        link.onmouseout = function() {
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                this.style.background = "#ebf1ff";
                                            } else {
                                                this.style.background = "#1b2745";
                                            }
                                        };

                                        image.onclick = function () {
                                            window.location.href = "/users/" + user_id + "/posts";
                                        };

                                        


                                        deletebutton.onclick = function (event) {
                                            event.stopPropagation();

                                            var existingdropdown = document.querySelector('.delete-dropdown');
                                            if (existingdropdown) {
                                                document.body.removeChild(existingdropdown);
                                            }

                                            var confirmdeletebutton = document.createElement("button");
                                            confirmdeletebutton.textContent = "Are you sure?";
                                            confirmdeletebutton.style.backgroundColor = "#f0f2f5";
                                            confirmdeletebutton.style.border = "0px solid white";
                                            confirmdeletebutton.style.color = "#787a80";
                                            confirmdeletebutton.style.padding = "5px";
                                            confirmdeletebutton.style.fontSize = "16px";
                                            confirmdeletebutton.style.width = "150px";
                                            confirmdeletebutton.style.borderRadius = "5px";
                                            confirmdeletebutton.style.cursor = "pointer";


                                            var deletedropdown = document.createElement("div");
                                            deletedropdown.classList.add('delete-dropdown');
                                            deletedropdown.style.position = "absolute";
                                            deletedropdown.style.top = (event.clientY + window.pageYOffset + 10) + "px";
                                            deletedropdown.style.left = event.clientX - 150 + "px";
                                            deletedropdown.style.backgroundColor = "white";
                                            deletedropdown.style.boxShadow = "0 0 5px rgba(0, 0, 0, 0.35)";
                                            deletedropdown.style.borderBottom = "3px solid #caccd0"
                                            deletedropdown.style.padding = "8px";
                                            deletedropdown.style.zIndex = "9999999999999999999999999999";
                                            deletedropdown.style.borderRadius = "8px";
                                            deletedropdown.appendChild(confirmdeletebutton);

                                            document.body.appendChild(deletedropdown);

                                            deletedropdown.style.overflow = "hidden"

                                            deletedropdown.style.height = "0px";
                                            deletedropdown.style.transition = "height 0.2s";
                                            requestAnimationFrame(() => {
                                                deletedropdown.style.height = deletedropdown.scrollHeight - 15 + "px";
                                            });

                                            window.addEventListener('scroll', function () {
                                                document.body.removeChild(deletedropdown);
                                                document.removeEventListener('click', handleclickoutside);
                                            });

                                            try {
                                            document.querySelector(".actualposts3").addEventListener('scroll', function () {
                                                document.body.removeChild(deletedropdown);
                                                document.removeEventListener('click', handleclickoutside);
                                            });
                                            } catch {
                                                console.log("skibidi")
                                            }

                                            confirmdeletebutton.onclick = function () {
                                                deletepost(post_id, index);
                                                document.body.removeChild(deletedropdown);
                                                window.removeEventListener('scroll');
                                            };



                                            confirmdeletebutton.onmouseover = function() {
                                                confirmdeletebutton.style.backgroundColor = "#de3e3c";
                                                confirmdeletebutton.style.color = "rgb(254, 254, 254)";
                                            };


                                            confirmdeletebutton.onmouseout = function() {
                                                confirmdeletebutton.style.backgroundColor = "#f0f2f5";
                                                confirmdeletebutton.style.color = "#787a80";
                                            };

                                            function handleclickoutside(event) {
                                                if (!deletedropdown.contains(event.target)) {
                                                    document.body.removeChild(deletedropdown);
                                                    document.removeEventListener('click', handleclickoutside);
                                                }
                                            }

                                            document.addEventListener('click', handleclickoutside);
                                        };





                                        deletebutton.onmouseover = function() {
                                            document.querySelector(".deletebutton" + index).style.backgroundColor = "#caccd0";
                                        };



                                        deletebutton.onmouseout = function() {
                                            document.querySelector(".deletebutton" + index).style.backgroundColor = "#f0f2f5";
                                        };



                                        visit.onmouseover = function() {
                                            document.querySelector(".visit" + index).style.backgroundColor = "#caccd0";
                                        };



                                        visit.onmouseout = function() {
                                            document.querySelector(".visit" + index).style.backgroundColor = "#f0f2f5";
                                        };

                                        if (likers.split("_LIKERS_").includes(String(your_id))) {
                                            like.onclick = function() { 
                                                function blue() {
                                                    likepost(post_id, "unlike");
                                                    document.querySelector(".like02" + index).textContent = parseInt(likes) - 1;
                                                    document.querySelector(".like" + index).style.backgroundColor = "#0866ff";
                                                    document.querySelector(".likeicon" + index).style.backgroundColor = "#0866ff";

                                                    document.querySelector(".like" + index).style.color = "white";
                                                    document.querySelector(".likeicon" + index).style.color = "white";

                                                    document.querySelector(".like" + index).onclick = function() {
                                                        clickdislike();
                                                        likepost(post_id, "like");
                                                        document.querySelector(".like02" + index).textContent = parseInt(likes) + 1 - 1;
                                                        if (document.getElementById("darkmode").textContent == "no") {
                                                            document.querySelector(".like" + index).style.backgroundColor = "#f0f2f5";
                                                            document.querySelector(".likeicon" + index).style.backgroundColor = "#f0f2f5";
                                                        } else {
                                                            document.querySelector(".like" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                            document.querySelector(".likeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                        }

                                                        if (document.getElementById("darkmode").textContent == "no") {
                                                            document.querySelector(".like" + index).style.color = "#787a80";
                                                            document.querySelector(".likeicon" + index).style.color = "#787a80";
                                                        } else {
                                                            document.querySelector(".like" + index).style.color = "rgb(180, 180, 180)";
                                                            document.querySelector(".likeicon" + index).style.color = "rgb(180, 180, 180)";
                                                        }
                                                        document.querySelector(".like" + index).onclick = function() {
                                                            
                                                            blue();
                                                        }
                                                    }
                                                }
                                                blue();
                                            };
                                        } else {
                                            like.onclick = function() { 
                                                function grey() {
                                                    clickdislike();
                                                    likepost(post_id, "like");
                                                    document.querySelector(".like02" + index).textContent = parseInt(likes) + 1;
                                                    if (document.getElementById("darkmode").textContent == "no") {
                                                        document.querySelector(".like" + index).style.backgroundColor = "#f0f2f5";
                                                        document.querySelector(".likeicon" + index).style.backgroundColor = "#f0f2f5";
                                                    } else {
                                                        document.querySelector(".like" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                        document.querySelector(".likeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                    }

                                                    if (document.getElementById("darkmode").textContent == "no") {
                                                        document.querySelector(".like" + index).style.color = "#787a80";
                                                        document.querySelector(".likeicon" + index).style.color = "#787a80";
                                                    } else {
                                                        document.querySelector(".like" + index).style.color = "rgb(180, 180, 180)";
                                                        document.querySelector(".likeicon" + index).style.color = "rgb(180, 180, 180)";
                                                    }
                                                    
                                                    document.querySelector(".like" + index).onclick = function() {
                                                        likepost(post_id, "unlike");
                                                        document.querySelector(".like02" + index).textContent = parseInt(likes) + 1 - 1;
                                                        document.querySelector(".like" + index).style.backgroundColor = "#0866ff";
                                                        document.querySelector(".likeicon" + index).style.backgroundColor = "#0866ff";

                                                        document.querySelector(".like" + index).style.color = "white";
                                                        document.querySelector(".likeicon" + index).style.color = "white";
                                                        document.querySelector(".like" + index).onclick = function() {
                                                            grey();
                                                        }
                                                    }
                                                }
                                                grey();
                                            };
                                        }

                                        if (dislikers.split("_DISLIKERS_").includes(String(your_id))) {
                                            dislike.onclick = function() { 
                                                function disblue() {
                                                    dislikepost(post_id, "undislike");
                                                    document.querySelector(".dislike02" + index).textContent = parseInt(dislikes) - 1;

                                                    document.querySelector(".dislike" + index).style.backgroundColor = "#0866ff";
                                                    document.querySelector(".dislikeicon" + index).style.backgroundColor = "#0866ff";

                                                    document.querySelector(".dislike" + index).style.color = "white";
                                                    document.querySelector(".dislikeicon" + index).style.color = "white";

                                                    document.querySelector(".dislike" + index).onclick = function() {
                                                        clicklike();
                                                        dislikepost(post_id, "dislike");
                                                        document.querySelector(".dislike02" + index).textContent = parseInt(dislikes) + 1 - 1;
                                                        if (document.getElementById("darkmode").textContent == "no") {
                                                            document.querySelector(".dislike" + index).style.backgroundColor = "#f0f2f5";
                                                            document.querySelector(".dislikeicon" + index).style.backgroundColor = "#f0f2f5";
                                                        } else {
                                                            document.querySelector(".dislike" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                            document.querySelector(".dislikeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                        }

                                                        if (document.getElementById("darkmode").textContent == "no") {
                                                            document.querySelector(".dislike" + index).style.color = "#787a80";
                                                            document.querySelector(".dislikeicon" + index).style.color = "#787a80";
                                                        } else {
                                                            document.querySelector(".dislike" + index).style.color = "rgb(180, 180, 180)";
                                                            document.querySelector(".dislikeicon" + index).style.color = "rgb(180, 180, 180)";
                                                        }
                                                        document.querySelector(".dislike" + index).onclick = function() {
                                                            
                                                            disblue();
                                                        }
                                                    }
                                                }
                                                disblue();
                                            };
                                        } else {
                                            dislike.onclick = function() { 
                                                function disgrey() {
                                                    clicklike();
                                                    dislikepost(post_id, "dislike");
                                                    document.querySelector(".dislike02" + index).textContent = parseInt(dislikes) + 1;
                                                    if (document.getElementById("darkmode").textContent == "no") {
                                                        document.querySelector(".dislike" + index).style.backgroundColor = "#f0f2f5";
                                                        document.querySelector(".dislikeicon" + index).style.backgroundColor = "#f0f2f5";
                                                    } else {
                                                        document.querySelector(".dislike" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                        document.querySelector(".dislikeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                    }

                                                    if (document.getElementById("darkmode").textContent == "no") {
                                                        document.querySelector(".dislike" + index).style.color = "#787a80";
                                                        document.querySelector(".dislikeicon" + index).style.color = "#787a80";
                                                    } else {
                                                        document.querySelector(".dislike" + index).style.color = "rgb(180, 180, 180)";
                                                        document.querySelector(".dislikeicon" + index).style.color = "rgb(180, 180, 180)";
                                                    }
                                                    

                                                    document.querySelector(".dislike" + index).onclick = function() {
                                                        
                                                        dislikepost(post_id, "undislike");
                                                        document.querySelector(".dislike02" + index).textContent = parseInt(dislikes) + 1 - 1;
                                                        
                                                    
                                                        document.querySelector(".dislike" + index).style.backgroundColor = "#0866ff";
                                                        document.querySelector(".dislikeicon" + index).style.backgroundColor = "#0866ff";

                                                        document.querySelector(".dislike" + index).style.color = "white";
                                                        document.querySelector(".dislikeicon" + index).style.color = "white";


                                                        document.querySelector(".dislike" + index).onclick = function() {
                                                            
                                                            disgrey();
                                                        }
                                                    }
                                                }
                                                disgrey();
                                            };
                                        }
                                        function clicklike() {
                                            console.log("LIKE IS CLICKING");
                                                
                                                
                                            var likeElement = document.querySelector(".like" + index);
                                            var computedStyle = window.getComputedStyle(likeElement);
                                            var backgroundColor = computedStyle.backgroundColor;

                                            if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                                console.log("LIKE IS CLICKING");
                                                likeElement.click();
                                            }
                                        }

                                        function clickdislike() {
                                            console.log("DISLIKE IS CLICKING");
                                            var dislikeElement = document.querySelector(".dislike" + index);
                                            var computedStyle = window.getComputedStyle(dislikeElement);
                                            var backgroundColor = computedStyle.backgroundColor;

                                            if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                                console.log("DISLIKE IS CLICKING");
                                                dislikeElement.click();
                                            }
                                        }
                                        visit.onclick = function() {
                                            window.location.href = "/posts/" + post_id
                                        };



                                    })(increment, user_ids[i], photos[i], post_ids[i], likes[i], dislikes[i], likers[i], dislikers[i], replying_to[i]);

                                    var user_id = user_ids[i];

                                    invite_text2.textContent = text2
                                    invite_text2.style.lineHeight = "0px";
                                    invite_text2.style.transform = "translate(0, 5px)";
                                    invite_text2.style.cursor = "pointer";
                                    invite_text2.style.float = "left";
                                    invite_text2.style.marginLeft = "10px";
                                    invite_text2.style.width = "100%";

                                    div.style.float = "left";
                                    div.className = "left" + increment;


                                    time.textContent = time2;
                                    time.style.marginLeft = "10px";
                                    time.style.fontSize = "14px";
                                    time.style.color = "gray";

                                    function matchAndRemoveYoutubeUrls(text) {
                                        var p = /(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/g;
                                        var matches = [];
                                        var match;
                                        while ((match = p.exec(text)) !== null) {
                                            matches.push(match[1]);
                                        }
                                        var cleanedText = text.replace(p, '');
                                        return { matches: matches.length > 0 ? matches : false, cleanedText: cleanedText };
                                    }

                                    var result = matchAndRemoveYoutubeUrls(text);

                                    match = result.matches[0]

                                    if (match != undefined) {
                                        var video = document.createElement("iframe");

                                        video.src = "https://www.youtube.com/embed/" + match
                                        video.width = "750px";
                                        video.height = "422px"
                                        video.setAttribute('frameborder', '0');
                                        video.setAttribute('allowfullscreen', '');

                                    }

                                    console.log("Cleaned Text:", result.cleanedText);


                                    invite_text.textContent = result.cleanedText.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'").replace(/^\s+/, '');
                                    invite_text.id = "invite_text";
                                    invite_text.style.transform = "translate(0, -7px)";
                                    invite_text.style.backgroundColor = "red";
                                    invite_text.style.rows = "auto";
                                    invite_text.style.marginLeft = "10px";
                                    invite_text.style.border = "0px solid red";
                                    invite_text.style.maxWidth = "100vw";
                                    invite_text.style.width = "730px";
                                    invite_text.style.resize = "none";
                                    invite_text.style.outline = "none";
                                    invite_text.style.backgroundColor = "white";
                                    invite_text.readOnly = true;
                                    invite_text.style.position = "relative";
                                    invite_text.style.fontFamily = "Arial";
                                    invite_text.style.fontSize = "16px";
                                    invite_text.style.marginTop = "5px";
                                    invite_text.style.height = "auto";
                                    invite_text.style.maxHeight = "500px";

                                    if (text.length <= 90) {
                                        invite_text.rows = "1";
                                    }



                                    image.style.fontSize = "16px";
                                    image.style.width = "50px";
                                    image.style.height = "50px";
                                    image.style.cursor = "pointer";
                                    image.style.marginLeft = "10px";
                                    image.style.marginTop = "10px";
                                    image.style.objectFit = "cover";
                                    image.style.marginBottom = "10px";
                                    image.style.float = "left";
                                    image.style.borderRadius = "50%";
                                    image.src = "data:image/jpeg;base64," + profile_pictures[i]
                                    image.className = "image" + post_ids[i]



                                    var icon = document.createElement('i');
                                    icon.classList.add('fas', 'fa-trash-can');
                                    icon.style.paddingRight = "5px";
                                    var text = document.createTextNode('Delete');
                                    deletebutton.appendChild(icon);
                                    deletebutton.appendChild(text);
                                    deletebutton.style.float = "right";
                                    deletebutton.className = "deletebutton" + increment
                                    deletebutton.style.backgroundColor = "#f0f2f5";
                                    deletebutton.style.border = "0px solid white";
                                    deletebutton.style.color = "#787a80";
                                    deletebutton.style.padding = "5px";
                                    deletebutton.style.fontSize = "16px";
                                    deletebutton.style.width = "100px";
                                    deletebutton.style.marginTop = "20px";
                                    deletebutton.style.marginRight = "10px";
                                    deletebutton.style.borderRadius = "5px";
                                    deletebutton.style.cursor = "pointer";


                                    link.textContent = "Post not found";
                                    link.style.cursor = "pointer";
                                    link.style.color = "#0866ff";
                                    link.style.maxWidth = "calc(100% - 20px)";
                                    link.style.width = "calc(100vw - 20px)";
                                    if (document.getElementById("darkmode").textContent == "no") {
                                        link.style.background = "#ebf1ff";
                                    } else {
                                        link.style.background = "#1b2745";
                                    }
                                    link.style.marginBottom = "10px";
                                    link.style.marginLeft = "10px";
                                    link.style.border = "0px solid white";
                                    link.style.borderRadius = "5px";
                                    link.style.fontSize = "16px";
                                    link.style.height = "30px";
                                    link.className = "link" + increment












                                    
                                    
                                    document.querySelector(".actualposts3").style.overflowX = "hidden";

                                    
                                    var actualimageparent = document.createElement("div");
                                    var actualimagediv = document.createElement("div");
                                    var actualimage = document.createElement("img");

                                    
                                    actualimage.style.cursor = "pointer";
                                    actualimage.style.objectFit = "contain";
                                    actualimage.id = "actualimage" + increment;
                                    actualimage.className = "actualimage" + post_ids[i];
                                    actualimage.src = "data:image/jpeg;base64," + photos[i];
                                    actualimage.style.maxWidth = "750px";
                                    actualimage.style.position = "absolute";
                                    actualimage.style.top = "50%";
                                    actualimage.style.left = "50%";
                                    actualimage.style.transform = "translate(-50%, -50%)";

                                    
                                    actualimagediv.style.background = "url(data:image/jpeg;base64," + photos[i] + ")";
                                    actualimagediv.style.width = "100%";
                                    actualimagediv.style.height = "100%";
                                    
                                    actualimagediv.style.filter = "blur(15px) brightness(50%)";
                                    actualimagediv.style.backgroundPosition = "center center";
                                    actualimagediv.style.backgroundSize = "cover";
                                    actualimagediv.className = "actualimagediv" + post_ids[i];

                                    
                                    actualimageparent.style.marginBottom = "5px";
                                    actualimageparent.style.marginTop = "5px";
                                    actualimageparent.style.position = "relative";
                                    actualimageparent.style.overflow = "hidden";
                                    actualimageparent.style.maxHeight = "500px";
                                    actualimageparent.style.width = "100%";

                                    actualimage.alt = "For all intents and purposes this image has loaded"
                                    image.alt = "Profile Picture"









                                    var hr = document.createElement("hr");
                                    hr.style.width = "750px";

                                    var likesdiv = document.createElement("div");

                                    likesdiv.className = "likesdiv" + increment
                                    likesdiv.style.height = "45px"



                                    likeicon.classList.add('fas', 'fa-thumbs-up');
                                    likeicon.style.paddingRight = "5px";
                                    var text = document.createTextNode('Like');
                                    like.appendChild(likeicon);
                                    like.appendChild(text);
                                    like.style.float = "left";
                                    like.style.marginLeft = "8px";
                                    like.style.border = "0px solid white";
                                    like.style.color = "white";
                                    like.style.padding = "3px";
                                    like.style.fontSize = "14px";
                                    like.style.borderRadius = "5px";
                                    like.style.backgroundColor = "#0866ff";
                                    like.style.width = "80px";
                                    like.style.cursor = "pointer";
                                    if (likers[i].split("_LIKERS_").includes(String(your_id))) {
                                        like.style.color = "#787a80";
                                        like.style.backgroundColor = "#f0f2f5";
                                        likeicon.style.backgroundColor = "#f0f2f5";
                                        likeicon.style.color = "#787a80";
                                    } else {
                                        like.style.color = "white";
                                        like.style.backgroundColor = "#0866ff";
                                        likeicon.style.backgroundColor = "#0866ff";
                                        likeicon.style.color = "white";

                                    }


                                    dislikeicon.classList.add('fas', 'fa-thumbs-down', "fa-flip-horizontal");
                                    dislikeicon.style.paddingLeft = "5px";
                                    var text = document.createTextNode('Dislike');
                                    dislike.appendChild(dislikeicon);
                                    dislike.appendChild(text);
                                    dislike.style.float = "left";
                                    dislike.style.marginLeft = "5px";
                                    dislike.style.border = "0px solid white";
                                    dislike.style.color = "white";
                                    dislike.style.padding = "3px";
                                    dislike.style.fontSize = "14px";
                                    dislike.style.borderRadius = "5px";
                                    dislike.style.backgroundColor = "#0866ff";
                                    dislike.style.width = "80px";
                                    dislike.style.cursor = "pointer";
                                    if (dislikers[i].split("_DISLIKERS_").includes(String(your_id))) {
                                        dislike.style.color = "#787a80";
                                        dislike.style.backgroundColor = "#f0f2f5";
                                        dislikeicon.style.backgroundColor = "#f0f2f5";
                                        dislikeicon.style.color = "#787a80";
                                    } else {
                                        dislike.style.color = "white";
                                        dislike.style.backgroundColor = "#0866ff";
                                        dislikeicon.style.backgroundColor = "#0866ff";
                                        dislikeicon.style.color = "white";
                                    }


                                    like2.textContent = likes[i]
                                    like2.style.float = "left";
                                    like2.style.marginLeft = "8px";
                                    like2.style.border = "0px solid white";
                                    like2.style.color = "#787a80";
                                    like2.style.padding = "3px";
                                    like2.style.fontSize = "14px";
                                    like2.style.width = "73px";
                                    like2.className = "like02" + increment


                                    dislike2.textContent = dislikes[i]
                                    dislike2.style.float = "left";
                                    dislike2.style.marginLeft = "5px";
                                    dislike2.style.border = "0px solid white";
                                    dislike2.style.color = "#787a80";
                                    dislike2.style.padding = "3px";
                                    dislike2.style.fontSize = "14px";
                                    dislike2.style.width = "73px";
                                    dislike2.className = "dislike02" + increment

                                    var icon = document.createElement('i');
                                    icon.classList.add('fas', 'fa-reply', "fa-flip-horizontal");
                                    icon.style.paddingLeft = "5px";
                                    var text = document.createTextNode('Go to Post');
                                    visit.appendChild(icon);
                                    visit.appendChild(text);
                                    visit.style.float = "left";
                                    visit.style.marginLeft = "5px";
                                    visit.style.border = "0px solid white";
                                    visit.style.color = "#787a80";
                                    visit.style.padding = "3px";
                                    visit.style.fontSize = "14px";
                                    visit.style.borderRadius = "5px";
                                    visit.style.backgroundColor = "#f0f2f5";
                                    visit.style.width = "calc(100% - 188px)";
                                    visit.style.cursor = "pointer";
                                    visit.className = "visit" + increment

                                    if (friends_only[i] == "yes") {
                                        console.log("FRIENDZ ONLY (it was yes): " + friends_only[i]);

                                        function friendsonlydiv() {
                                            var friendsonlydiv = document.createElement("div");

                                            friendsonlydiv.style.float = "left";
                                            friendsonlydiv.style.fontSize = "17px";
                                            friendsonlydiv.style.color = "#787a80";
                                            friendsonlydiv.textContent = "Friends Only";
                                            friendsonlydiv.style.lineHeight = "0";
                                            friendsonlydiv.style.textAlign = "center";
                                            friendsonlydiv.style.width = "100vw";
                                            friendsonlydiv.style.transform = "translate(0, 20px)";
                                            friendsonlydiv.style.maxWidth = "750px";

                                            newDiv.appendChild(friendsonlydiv);
                                        }
                                        
                                        if (!friending[i].split("_ITEM_").includes(String(your_id))) {

                                            newDiv.style.display = "none";
                                            
                                            number = document.getElementById("repliesamount").textContent.replace(")", "").replace("(", "")
                                            number = parseInt(number)
                                            number = number - 1


                                            document.getElementById("repliesamount").textContent = "(" + number + ")"

                                            if (parseInt(user_ids[i]) == parseInt(your_id)) {
                                                newDiv.style.display = "block";

                                                number = number + 1

                                                friendsonlydiv();
                                            }

                                            document.getElementById("repliesamount").textContent = "(" + number + ")"

                                        } else {
                                            friendsonlydiv();

                                        }
                                    }
                                    


                                    document.querySelector(".actualposts2").appendChild(newDiv);

                                    document.querySelector(".post" + increment).appendChild(image);

                                    if (parseInt(user_id) == parseInt(your_id)) {
                                        document.querySelector(".post" + increment).appendChild(deletebutton);
                                    }

                                    document.querySelector(".post" + increment).appendChild(div);
                                    document.querySelector(".left" + increment).appendChild(invite_text2);
                                    document.querySelector(".left" + increment).appendChild(time);

                                    if (replying_to[i] != "") {
                                        document.querySelector(".post" + increment).appendChild(link);

                                    }

                                    document.querySelector(".post" + increment).appendChild(invite_text);

                                    if (match != undefined) {
                                        document.querySelector(".post" + increment).appendChild(video);

                                    }

                                    console.log("PHOTO? ---> " + photos[i])

                                    if (photos[i] != "") {
                                        document.querySelector(".post" + increment).appendChild(actualimageparent);
                                        actualimageparent.appendChild(actualimagediv);
                                        actualimageparent.appendChild(actualimage);

                                        function resize() {
                                            actualimagediv.style.height = actualimage.offsetHeight + "px";
                                            actualimagediv.style.maxHeight = "500px";
                                            actualimage.style.maxHeight = "500px";
                                        }
                                        resize();

                                        window.addEventListener('resize', resize);
                                        window.addEventListener('scroll', resize);
                                    }

                                    if (photos[i] == "" && match == undefined) {
                                        document.querySelector(".post" + increment).appendChild(hr);
                                    }
                                    document.querySelector(".post" + increment).appendChild(likesdiv);
                                    document.querySelector(".likesdiv" + increment).appendChild(like);
                                    document.querySelector(".likesdiv" + increment).appendChild(dislike);
                                    document.querySelector(".likesdiv" + increment).appendChild(visit);
                                    document.querySelector(".likesdiv" + increment).appendChild(like2);
                                    document.querySelector(".likesdiv" + increment).appendChild(dislike2);


                                    invite_text.style.height = (invite_text.scrollHeight) + 'px';



                                    }
                                }

                                console.log(post_ids)
                                
                                for (var i = 0; i < arraylength; i++) {
                                    (function (index) {
                                        if (index !== 0) {
                                            var post_id = post_ids[index];

                                            try {
                                                var actualimage = document.querySelector(".actualimage" + post_id); 
                                                var actualimagediv = document.querySelector(".actualimagediv" + post_id); 
                                            } catch {
                                                console.log("stoopid")
                                            }

                                            var url = '/get/image/' + post_id;

                                            fetch(url)
                                                .then(response => {
                                                    if (!response.ok) {
                                                        throw new Error('you lose');
                                                    }
                                                    return response.text();
                                                })
                                                .then(image => {
                                                    try {
                                                    actualimagediv.style.background = "url(data:image/jpeg;base64," + image + ")";
                                                    actualimage.src = "data:image/jpeg;base64," + image;

                                                    actualimagediv.style.backgroundPosition = "center center";
                                                    actualimagediv.style.backgroundSize = "cover";

                                                    
                                                    actualimage.onload = function() {
                                                        actualimagediv.style.height = actualimage.offsetHeight + "px";
                                                        actualimagediv.style.maxHeight = "500px";
                                                        actualimage.style.maxHeight = "500px";
                                                    };

                                                    

                                                    actualimage.onclick = function () {
                                                        function displayimage(){

                                                        let scrollPosition = { top: 0, left: 0 };


                                                        scrollPosition = {
                                                            top: window.scrollY,
                                                            left: window.scrollX
                                                        };

                                                        document.body.style.overflow = 'hidden';
                                                        document.documentElement.style.overflow = 'hidden';

                                                        window.scrollTo(scrollPosition.left, scrollPosition.top);






                                                        event.stopPropagation();

                                                        var existingdropdown = document.querySelector('.delete-dropdown');
                                                        if (existingdropdown) {
                                                            document.body.removeChild(existingdropdown);
                                                        }




                                                        var image = document.createElement("img");
                                                        image.src = actualimage.src
                                                        image.style.maxHeight = "calc(100vh - 214px)";
                                                        image.style.maxWidth = "calc(100vw - 214px)";
                                                        image.style.alignSelf = "center";
                                                        image.style.objectFit = "cover";
                                                        image.style.transform = "translate(calc(50vw - 50%))"


                                                        var button = document.createElement("button");
                                                        button.style.borderRadius = "50%";
                                                        button.style.backgroundColor = "white";
                                                        button.style.border = "none";
                                                        button.style.width = "50px";
                                                        button.style.height = "50px";
                                                        button.textContent = "✖";
                                                        button.style.fontSize = "20px";
                                                        button.style.paddingBottom = "3px";
                                                        button.style.position = "absolute";
                                                        button.style.margin = "25px";
                                                        button.style.marginTop = "25px";

                                                        button.onmouseout = function () {
                                                            button.style.backgroundColor = "white";
                                                        };

                                                        button.onmouseover = function() {
                                                            button.style.backgroundColor = "#caccd0";
                                                        };


                                                        var deletedropdown = document.createElement("div");
                                                        deletedropdown.classList.add('delete-dropdown');
                                                        deletedropdown.id = "deletedropdown"
                                                        deletedropdown.style.position = "absolute";
                                                        deletedropdown.style.top = window.pageYOffset + 64 + "px";
                                                        deletedropdown.style.backgroundColor = "rgba(0, 0, 0, 0.75)";
                                                        deletedropdown.style.zIndex = "9999";
                                                        deletedropdown.style.height = "calc(100vh - 64px)";
                                                        deletedropdown.style.width = "100vw";
                                                        deletedropdown.style.backdropFilter = "blur(75px)"

                                                        deletedropdown.style.display = "flex";



                                                        document.body.appendChild(deletedropdown);

                                                        deletedropdown.appendChild(image);
                                                        deletedropdown.appendChild(button);







                                                        deletedropdown.addEventListener('click', handleclickoutside);
                                                        image.addEventListener('click', displayimage);




                                                        function handleclickoutside(event) {
                                                            let scrollPosition = { top: 0, left: 0 };

                                                            document.body.style.overflow = '';
                                                            document.documentElement.style.overflow = '';




                                                            console.log("giggle")
                                                            // if (!deletedropdown.contains(image)) {
                                                                document.body.removeChild(deletedropdown);
                                                                document.removeEventListener('click', handleclickoutside);
                                                            // }
                                                        }

                                                        function handleclickoutside2(event) {
                                                            actualimage.click()
                                                        }

                                                        document.addEventListener('click', handleclickoutside);
                                                        }
                                                        displayimage();

                                                    };
                                                    
                                                    } catch {
                                                        console.error("stoopid")
                                                    }
                                                    
                                                    

                                                })
                                                .catch(error => {
                                                    console.error('error fetching image for post id:', post_id, error);
                                                });

                                                
                                            


                                            
                                        }
                                    })(i);
                                }

                                for (var i = 0; i < arraylength; i++) {
                                
                                    (function (index) {
                                        if (index !== 0) {
                                            var post_id = post_ids[index];

                                            


                                            var imagen = document.querySelector(".image" + post_id); 
                                            var url = '/get/pfp/' + post_id;

                                            fetch(url)
                                                .then(response => {
                                                    if (!response.ok) {
                                                        throw new Error('you lose');
                                                    }
                                                    return response.text();
                                                })
                                                .then(image => {
                                                    imagen.src = "data:image/jpeg;base64," + image;
                                                    
                                                    
                                                })
                                                .catch(error => {
                                                    console.error('error fetching image for post id:', post_id, error);
                                                });
                                        }
                                    })(i);
                                }

                                for (var i = 0; i < arraylength; i++) {
                                    
                                    (function (index) {
                                        if (index !== 0) {
                                            // var replying_to = replying_to[index];

                                            console.log("replying to: " + replying_to[index])

                                            index2 = index + 1
                                            var rizz = ".link" + index2
                                            console.log(rizz)

                                            var link = document.querySelector(rizz); 
                                            var url = '/get/reply_message/' + replying_to[index];

                                            console.log(url)

                                            try {
                                                fetch(url)
                                                    .then(response => {
                                                        if (!response.ok) {
                                                            throw new Error('you lose');
                                                        }
                                                        return response.text();
                                                    })
                                                    
                                                    .then(message => {
                                                        let message2 = message

                                                        message2 = message2.replace(/_THISISALINEBREAK_/g, " ").replace(/_THISISANAPOSTROPHE_/g, "'").substring(0, 30) + "...";
                                                        
                                                        link.textContent = message2
                                                        
                                                    })
                                                    .catch(error => {
                                                        console.error('error fetching image for post id:', error);
                                                    });
                                            } catch {
                                                console.log("not a reply")
                                            }
                                        }
                                    })(i);
                                }

                                
                            }
                            document.getElementById("clickme").click()

                            console.log(document.getElementById("clickme").textContent)
            
                        </script>
                    </div>
                </div>

                


            </div>

            <script>
                increment = 0

                function newpost(name, profile_picture, your_id, theirid) {

                    try {
                        document.querySelector(".maggiemae").style.display = "none";
                    }
                    catch (error) {
                        console.log("womp womp");
                    }


                    document.getElementById("newpost").textContent = "new_post";

                    console.log("NEW POST G");

                    number = document.getElementById("repliesamount").textContent.replace(")", "").replace("(", "")
                    number = parseInt(number)
                    number = number + 1


                    document.getElementById("repliesamount").textContent = "(" + number + ")"

                    increment = increment - 1

                    var newDiv = document.createElement('div');
                    var invite_text2 = document.createElement("P");
                    var invite_text = document.createElement("textarea");

                    newDiv.style.fontSize = "20px";
                    newDiv.style.backgroundColor = 'white';
                    newDiv.className = "post" + increment;
                    newDiv.style.marginBottom = "15px";
                    newDiv.style.borderRadius = "10px";
                    newDiv.style.borderBottom = "2px solid #caccd0";

                    newDiv.style.maxWidth = "750px";
                    newDiv.style.width = "100vw";






                    var div = document.createElement("div");
                    var image = document.createElement("img");
                    var time = document.createElement("p");
                    var actualimage = document.createElement("img");
                    var link = document.createElement("button");
                    var like = document.createElement("button");
                    var dislike = document.createElement("button");

                    like.className = "like" + increment;
                    dislike.className = "dislike" + increment;

                    var dislikeicon = document.createElement("i");
                    dislikeicon.className = "dislikeicon" + increment

                    var likeicon = document.createElement("i");
                    likeicon.className = "likeicon" + increment

                    var like2 = document.createElement("div");
                    var dislike2 = document.createElement("div");

                    var visit = document.createElement("button");


                    invite_text2.textContent = name
                    invite_text2.style.lineHeight = "0px";
                    invite_text2.style.transform = "translate(0, 5px)";
                    invite_text2.style.cursor = "pointer";
                    invite_text2.style.float = "left";
                    invite_text2.style.marginLeft = "10px";
                    invite_text2.style.width = "100%";

                    div.style.float = "left";
                    div.className = "left" + increment;

                    const now = new Date();
                    const day = String(now.getDate()).padStart(2, '0');
                    const month = String(now.getMonth() + 1).padStart(2, '0');
                    const year = now.getFullYear();
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const date = `${day}/${month}/${year} ${hours}:${minutes}`;


                    time.textContent = date;
                    time.style.marginLeft = "10px";
                    time.style.fontSize = "14px";
                    time.style.color = "gray";

                    text = document.getElementById("aboutsectionedit2").value

                    if (text.length <= 90) {
                        invite_text.rows = "1";
                    }

                    photo = document.getElementById("imageinput").value


                    fetch('/get_post_id')
                        .then(response => {
                            if (!response.ok) {
                            throw new Error('womp womp error not good');
                            }
                            return response.text();
                        })
                        .then(post_id => {

                            async function likepost(post_id, likestate) {
                                try {
                                    const response = await fetch(`/like/${likestate}/${post_id}`, { method: 'POST' });
                                    if (!response.ok) {
                                        throw new Error('Network response was not ok.');
                                    }
                                    const data = await response.text();
                                    console.log(data);
                                } catch (error) {
                                    console.error('Error:', error);
                                }
                            }

                            async function dislikepost(post_id, likestate) {
                                try {
                                    const response = await fetch(`/dislike/${likestate}/${post_id}`, { method: 'POST' });
                                    if (!response.ok) {
                                        throw new Error('Network response was not ok.');
                                    }
                                    const data = await response.text();
                                    console.log(data);
                                } catch (error) {
                                    console.error('Error:', error);
                                }
                            }



                            



                            (function (index, post_id, your_id, photo, replying_to) {

                                invite_text2.onclick = function () {
                                    window.location.href = "/users/" + your_id + "/posts";
                                };

                                link.onclick = function () {
                                    window.location.href = "/posts/" + replying_to
                                };

                                link.onmouseover = function() {
                                    if (document.getElementById("darkmode").textContent == "no") {
                                        this.style.background = "#c9daff";
                                    } else {
                                        this.style.background = "#273c6b";
                                    }
                                };

                                link.onmouseout = function() {
                                    if (document.getElementById("darkmode").textContent == "no") {
                                        this.style.background = "#ebf1ff";
                                    } else {
                                        this.style.background = "#1b2745";
                                    }
                                };

                                image.onclick = function () {
                                    window.location.href = "/users/" + your_id + "/posts";
                                };

                                actualimage.onclick = function () {
                                    function displayimage(){

                                    let scrollPosition = { top: 0, left: 0 };


                                    scrollPosition = {
                                        top: window.scrollY,
                                        left: window.scrollX
                                    };

                                    document.body.style.overflow = 'hidden';
                                    document.documentElement.style.overflow = 'hidden';

                                    window.scrollTo(scrollPosition.left, scrollPosition.top);






                                    event.stopPropagation();

                                    var existingdropdown = document.querySelector('.delete-dropdown');
                                    if (existingdropdown) {
                                        document.body.removeChild(existingdropdown);
                                    }




                                    var image = document.createElement("img");
                                    image.src = "data:image/jpeg;base64," + photo
                                    image.style.maxHeight = "calc(100vh - 214px)";
                                    image.style.maxWidth = "calc(100vw - 214px)";
                                    image.style.alignSelf = "center";
                                    image.style.objectFit = "cover";
                                    image.style.transform = "translate(calc(50vw - 50%))"


                                    var button = document.createElement("button");
                                    button.style.borderRadius = "50%";
                                    button.style.backgroundColor = "white";
                                    button.style.border = "none";
                                    button.style.width = "50px";
                                    button.style.height = "50px";
                                    button.textContent = "✖";
                                    button.style.fontSize = "20px";
                                    button.style.paddingBottom = "3px";
                                    button.style.position = "absolute";
                                    button.style.margin = "25px";
                                    button.style.marginTop = "25px";

                                    button.onmouseout = function () {
                                        button.style.backgroundColor = "white";
                                    };

                                    button.onmouseover = function() {
                                        button.style.backgroundColor = "#caccd0";
                                    };


                                    var deletedropdown = document.createElement("div");
                                    deletedropdown.classList.add('delete-dropdown');
                                    deletedropdown.id = "deletedropdown"
                                    deletedropdown.style.position = "absolute";
                                    deletedropdown.style.top = window.pageYOffset + 64 + "px";
                                    deletedropdown.style.backgroundColor = "rgba(0, 0, 0, 0.75)";
                                    deletedropdown.style.zIndex = "9999";
                                    deletedropdown.style.height = "calc(100vh - 64px)";
                                    deletedropdown.style.width = "100vw";
                                    deletedropdown.style.backdropFilter = "blur(75px)"

                                    deletedropdown.style.display = "flex";



                                    document.body.appendChild(deletedropdown);

                                    deletedropdown.appendChild(image);
                                    deletedropdown.appendChild(button);







                                    deletedropdown.addEventListener('click', handleclickoutside);
                                    image.addEventListener('click', displayimage);




                                    function handleclickoutside(event) {
                                        let scrollPosition = { top: 0, left: 0 };

                                        document.body.style.overflow = '';
                                        document.documentElement.style.overflow = '';




                                        console.log("giggle")
                                        // if (!deletedropdown.contains(image)) {
                                            document.body.removeChild(deletedropdown);
                                            document.removeEventListener('click', handleclickoutside);
                                        // }
                                    }

                                    function handleclickoutside2(event) {
                                        actualimage.click()
                                    }

                                    document.addEventListener('click', handleclickoutside);
                                    }
                                    displayimage();

                                };

                                visit.onmouseover = function() {
                                    document.querySelector(".visit" + index).style.backgroundColor = "#caccd0";
                                };

                                visit.onmouseout = function() {
                                    document.querySelector(".visit" + index).style.backgroundColor = "#f0f2f5";
                                };


                                if ("".split("_LIKERS_").includes(String(your_id))) {
                                    like.onclick = function() { 
                                        function blue() {
                                            likepost(post_id, "unlike");
                                            document.querySelector(".like02" + index).textContent = parseInt(document.querySelector(".like02" + index).textContent) - 1;
                                            document.querySelector(".like" + index).style.backgroundColor = "#0866ff";
                                            document.querySelector(".likeicon" + index).style.backgroundColor = "#0866ff";

                                            document.querySelector(".like" + index).style.color = "white";
                                            document.querySelector(".likeicon" + index).style.color = "white";

                                            document.querySelector(".like" + index).onclick = function() {
                                                clickdislike();
                                                likepost(post_id, "like");
                                                document.querySelector(".like02" + index).textContent = parseInt(document.querySelector(".like02" + index).textContent) + 1;
                                                if (document.getElementById("darkmode").textContent == "no") {
                                                    document.querySelector(".like" + index).style.backgroundColor = "#f0f2f5";
                                                    document.querySelector(".likeicon" + index).style.backgroundColor = "#f0f2f5";
                                                } else {
                                                    document.querySelector(".like" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                    document.querySelector(".likeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                }

                                                if (document.getElementById("darkmode").textContent == "no") {
                                                    document.querySelector(".like" + index).style.color = "#787a80";
                                                    document.querySelector(".likeicon" + index).style.color = "#787a80";
                                                } else {
                                                    document.querySelector(".like" + index).style.color = "rgb(180, 180, 180)";
                                                    document.querySelector(".likeicon" + index).style.color = "rgb(180, 180, 180)";
                                                }
                                                document.querySelector(".like" + index).onclick = function() {
                                                    
                                                    blue();
                                                }
                                            }
                                        }
                                        blue();
                                    };
                                } else {
                                    like.onclick = function() { 
                                        function grey() {
                                            clickdislike();
                                            likepost(post_id, "like");
                                            document.querySelector(".like02" + index).textContent = parseInt(document.querySelector(".like02" + index).textContent) + 1;
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".like" + index).style.backgroundColor = "#f0f2f5";
                                                document.querySelector(".likeicon" + index).style.backgroundColor = "#f0f2f5";
                                            } else {
                                                document.querySelector(".like" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                document.querySelector(".likeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                            }

                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".like" + index).style.color = "#787a80";
                                                document.querySelector(".likeicon" + index).style.color = "#787a80";
                                            } else {
                                                document.querySelector(".like" + index).style.color = "rgb(180, 180, 180)";
                                                document.querySelector(".likeicon" + index).style.color = "rgb(180, 180, 180)";
                                            }
                                            
                                            document.querySelector(".like" + index).onclick = function() {
                                                likepost(post_id, "unlike");
                                                document.querySelector(".like02" + index).textContent = parseInt(document.querySelector(".like02" + index).textContent) - 1;
                                                document.querySelector(".like" + index).style.backgroundColor = "#0866ff";
                                                document.querySelector(".likeicon" + index).style.backgroundColor = "#0866ff";

                                                document.querySelector(".like" + index).style.color = "white";
                                                document.querySelector(".likeicon" + index).style.color = "white";
                                                document.querySelector(".like" + index).onclick = function() {
                                                    grey();
                                                }
                                            }
                                        }
                                        grey();
                                    };
                                }

                                if ("".split("_DISLIKERS_").includes(String(your_id))) {
                                    dislike.onclick = function() { 
                                        function disblue() {
                                            dislikepost(post_id, "undislike");
                                            document.querySelector(".dislike02" + index).textContent = parseInt(document.querySelector(".dislike02" + index).textContent) - 1;

                                            document.querySelector(".dislike" + index).style.backgroundColor = "#0866ff";
                                            document.querySelector(".dislikeicon" + index).style.backgroundColor = "#0866ff";

                                            document.querySelector(".dislike" + index).style.color = "white";
                                            document.querySelector(".dislikeicon" + index).style.color = "white";

                                            document.querySelector(".dislike" + index).onclick = function() {
                                                clicklike();
                                                dislikepost(post_id, "dislike");
                                                document.querySelector(".dislike02" + index).textContent = parseInt(document.querySelector(".dislike02" + index).textContent) + 1;
                                                if (document.getElementById("darkmode").textContent == "no") {
                                                    document.querySelector(".dislike" + index).style.backgroundColor = "#f0f2f5";
                                                    document.querySelector(".dislikeicon" + index).style.backgroundColor = "#f0f2f5";
                                                } else {
                                                    document.querySelector(".dislike" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                    document.querySelector(".dislikeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                }

                                                if (document.getElementById("darkmode").textContent == "no") {
                                                    document.querySelector(".dislike" + index).style.color = "#787a80";
                                                    document.querySelector(".dislikeicon" + index).style.color = "#787a80";
                                                } else {
                                                    document.querySelector(".dislike" + index).style.color = "rgb(180, 180, 180)";
                                                    document.querySelector(".dislikeicon" + index).style.color = "rgb(180, 180, 180)";
                                                }
                                                document.querySelector(".dislike" + index).onclick = function() {
                                                    
                                                    disblue();
                                                }
                                            }
                                        }
                                        disblue();
                                    };
                                } else {
                                    dislike.onclick = function() { 
                                        function disgrey() {
                                            clicklike();
                                            dislikepost(post_id, "dislike");
                                            document.querySelector(".dislike02" + index).textContent = parseInt(document.querySelector(".dislike02" + index).textContent) + 1;
                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".dislike" + index).style.backgroundColor = "#f0f2f5";
                                                document.querySelector(".dislikeicon" + index).style.backgroundColor = "#f0f2f5";
                                            } else {
                                                document.querySelector(".dislike" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                                document.querySelector(".dislikeicon" + index).style.backgroundColor = "rgb(23, 23, 23)";
                                            }

                                            if (document.getElementById("darkmode").textContent == "no") {
                                                document.querySelector(".dislike" + index).style.color = "#787a80";
                                                document.querySelector(".dislikeicon" + index).style.color = "#787a80";
                                            } else {
                                                document.querySelector(".dislike" + index).style.color = "rgb(180, 180, 180)";
                                                document.querySelector(".dislikeicon" + index).style.color = "rgb(180, 180, 180)";
                                            }
                                            

                                            document.querySelector(".dislike" + index).onclick = function() {
                                                
                                                dislikepost(post_id, "undislike");
                                                document.querySelector(".dislike02" + index).textContent = parseInt(document.querySelector(".dislike02" + index).textContent) - 1;
                                                
                                            
                                                document.querySelector(".dislike" + index).style.backgroundColor = "#0866ff";
                                                document.querySelector(".dislikeicon" + index).style.backgroundColor = "#0866ff";

                                                document.querySelector(".dislike" + index).style.color = "white";
                                                document.querySelector(".dislikeicon" + index).style.color = "white";


                                                document.querySelector(".dislike" + index).onclick = function() {
                                                    
                                                    disgrey();
                                                }
                                            }
                                        }
                                        disgrey();
                                    };
                                }
                                function clicklike() {
                                    console.log("LIKE IS CLICKING");
                                        
                                        
                                    var likeElement = document.querySelector(".like" + index);
                                    var computedStyle = window.getComputedStyle(likeElement);
                                    var backgroundColor = computedStyle.backgroundColor;

                                    if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                        console.log("LIKE IS CLICKING");
                                        likeElement.click();
                                    }
                                }

                                function clickdislike() {
                                    console.log("DISLIKE IS CLICKING");
                                    var dislikeElement = document.querySelector(".dislike" + index);
                                    var computedStyle = window.getComputedStyle(dislikeElement);
                                    var backgroundColor = computedStyle.backgroundColor;

                                    if (backgroundColor === "rgb(240, 242, 245)" || backgroundColor === "rgb(23, 23, 23)") {
                                        console.log("DISLIKE IS CLICKING");
                                        dislikeElement.click();
                                    }
                                }
                                visit.onclick = function() {
                                    window.location.href = "/posts/" + post_id
                                };

                            }) (increment, post_id, your_id, photo, theirid);




                        })
                        .catch(error => {
                            console.error('womp womp:', error);
                        });


                    function matchAndRemoveYoutubeUrls(text) {
                        var p = /(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/g;
                        var matches = [];
                        var match;
                        while ((match = p.exec(text)) !== null) {
                            matches.push(match[1]);
                        }
                        var cleanedText = text.replace(p, '');
                        return { matches: matches.length > 0 ? matches : false, cleanedText: cleanedText };
                    }

                    var result = matchAndRemoveYoutubeUrls(text = document.getElementById("aboutsectionedit2").value);

                    match = result.matches[0]

                    if (match != undefined) {
                        var video = document.createElement("iframe");

                        video.src = "https://www.youtube.com/embed/" + match
                        video.width = "750px";
                        video.height = "422px"
                        video.setAttribute('frameborder', '0');
                        video.setAttribute('allowfullscreen', '');

                    }

                    console.log("Cleaned Text:", result.cleanedText);


                    invite_text.textContent = result.cleanedText.replace(/_THISISALINEBREAK_/g, "\n").replace(/_THISISANAPOSTROPHE_/g, "'").replace(/^\s+/, '');
                    invite_text.style.height = (invite_text.scrollHeight) + 'px';

                    invite_text.id = "invite_text";
                    invite_text.style.transform = "translate(0, -7px)";
                    invite_text.style.backgroundColor = "red";
                    invite_text.style.rows = "auto";
                    invite_text.style.marginLeft = "10px";
                    invite_text.style.border = "0px solid red";
                    invite_text.style.maxWidth = "100vw";
                    invite_text.style.width = "730px";
                    invite_text.style.resize = "none";
                    invite_text.style.outline = "none";
                    invite_text.style.backgroundColor = "white";
                    invite_text.readOnly = true;
                    invite_text.style.position = "relative";
                    invite_text.style.fontFamily = "Arial";
                    invite_text.style.fontSize = "16px";
                    invite_text.style.marginTop = "5px";
                    invite_text.style.height = "auto";
                    invite_text.style.maxHeight = "500px";




                    image.style.fontSize = "16px";
                    image.style.width = "50px";
                    image.style.height = "50px";
                    image.style.cursor = "pointer";
                    image.style.marginLeft = "10px";
                    image.style.marginTop = "10px";
                    image.style.marginBottom = "10px";
                    image.style.float = "left";
                    image.style.borderRadius = "50%";
                    image.style.objectFit = "cover";
                    image.src = "data:image/jpeg;base64," + profile_picture




                    document.querySelector(".actualposts3").style.overflowX = "hidden";

                                    
                    var actualimageparent = document.createElement("div");
                    var actualimagediv = document.createElement("div");
                    var actualimage = document.createElement("img");


                    actualimage.style.cursor = "pointer";
                    actualimage.style.objectFit = "contain";
                    actualimage.id = "actualimage" + increment;
                    actualimage.src = "data:image/jpeg;base64," + document.getElementById("imageinput").value
                    actualimage.style.maxWidth = "750px";
                    actualimage.style.position = "absolute";
                    actualimage.style.top = "50%";
                    actualimage.style.left = "50%";
                    actualimage.style.transform = "translate(-50%, -50%)";


                    actualimagediv.style.background = "url(data:image/jpeg;base64," + document.getElementById("imageinput").value + ")";
                    actualimagediv.style.width = "100%";
                    actualimagediv.style.height = "100%";
                    actualimagediv.style.filter = "blur(15px) brightness(50%)";
                    actualimagediv.style.backgroundPosition = "center center";
                    actualimagediv.style.backgroundSize = "cover";



                    actualimageparent.style.marginBottom = "5px";
                    actualimageparent.style.marginTop = "5px";
                    actualimageparent.style.position = "relative";
                    actualimageparent.style.overflow = "hidden";
                    actualimageparent.style.maxHeight = "500px";
                    actualimageparent.style.width = "100%";












                    var hr = document.createElement("hr");
                    hr.style.width = "750px";

                    var likesdiv = document.createElement("div");

                    likesdiv.className = "likesdiv" + increment
                    likesdiv.style.height = "45px";




                    likeicon.classList.add('fas', 'fa-thumbs-up');
                    likeicon.style.paddingRight = "5px";
                    var text = document.createTextNode('Like');
                    like.appendChild(likeicon);
                    like.appendChild(text);
                    like.style.float = "left";
                    like.style.marginLeft = "8px";
                    like.style.border = "0px solid white";
                    like.style.color = "white";
                    like.style.padding = "3px";
                    like.style.fontSize = "14px";
                    like.style.borderRadius = "5px";
                    like.style.backgroundColor = "#0866ff";
                    like.style.width = "80px";
                    like.style.cursor = "pointer";
                    like.style.color = "white";
                    like.style.backgroundColor = "#0866ff";
                    likeicon.style.backgroundColor = "#0866ff";
                    likeicon.style.color = "white";



                    dislikeicon.classList.add('fas', 'fa-thumbs-down', "fa-flip-horizontal");
                    dislikeicon.style.paddingLeft = "5px";
                    var text = document.createTextNode('Dislike');
                    dislike.appendChild(dislikeicon);
                    dislike.appendChild(text);
                    dislike.style.float = "left";
                    dislike.style.marginLeft = "5px";
                    dislike.style.border = "0px solid white";
                    dislike.style.color = "white";
                    dislike.style.padding = "3px";
                    dislike.style.fontSize = "14px";
                    dislike.style.borderRadius = "5px";
                    dislike.style.backgroundColor = "#0866ff";
                    dislike.style.width = "80px";
                    dislike.style.cursor = "pointer";
                    dislike.style.color = "white";
                    dislike.style.backgroundColor = "#0866ff";
                    dislikeicon.style.backgroundColor = "#0866ff";
                    dislikeicon.style.color = "white";

                    link.textContent = document.getElementById("shame").value.replace(/_THISISALINEBREAK_/g, " ").replace(/_THISISANAPOSTROPHE_/g, "'").substring(0, 30) + "..."
                    link.style.cursor = "pointer";
                    link.style.color = "#0866ff";
                    link.style.maxWidth = "calc(100% - 20px)";
                    link.style.width = "calc(100vw - 20px)";
                    if (document.getElementById("darkmode").textContent == "no") {
                        link.style.background = "#ebf1ff";
                    } else {
                        link.style.background = "#1b2745";
                    }
                    link.style.marginBottom = "10px";
                    link.style.marginLeft = "10px";
                    link.style.border = "0px solid white";
                    link.style.borderRadius = "5px";
                    link.style.fontSize = "16px";
                    link.style.height = "30px";
                    link.className = "link" + increment




                    like2.textContent = "0"
                    like2.style.float = "left";
                    like2.style.marginLeft = "8px";
                    like2.style.border = "0px solid white";
                    like2.style.color = "#787a80";
                    like2.style.padding = "3px";
                    like2.style.fontSize = "14px";
                    like2.style.width = "73px";
                    like2.className = "like02" + increment


                    dislike2.textContent = "0"
                    dislike2.style.float = "left";
                    dislike2.style.marginLeft = "5px";
                    dislike2.style.border = "0px solid white";
                    dislike2.style.color = "#787a80";
                    dislike2.style.padding = "3px";
                    dislike2.style.fontSize = "14px";
                    dislike2.style.width = "73px";
                    dislike2.className = "dislike02" + increment

                    var icon = document.createElement('i');
                    icon.classList.add('fas', 'fa-reply', "fa-flip-horizontal");
                    icon.style.paddingLeft = "5px";
                    var text = document.createTextNode('Go to Post');
                    visit.appendChild(icon);
                    visit.appendChild(text);
                    visit.style.float = "left";
                    visit.style.marginLeft = "5px";
                    visit.style.border = "0px solid white";
                    visit.style.color = "#787a80";
                    visit.style.padding = "3px";
                    visit.style.fontSize = "14px";
                    visit.style.borderRadius = "5px";
                    visit.style.backgroundColor = "#f0f2f5";
                    visit.style.width = "calc(100% - 188px)";
                    visit.style.cursor = "pointer";
                    visit.className = "visit" + increment

                    if (document.getElementById("friends_only").checked) {
                        var friendsonlydiv = document.createElement("div");

                        friendsonlydiv.style.float = "left";
                        friendsonlydiv.style.fontSize = "17px";
                        friendsonlydiv.style.color = "#787a80";
                        friendsonlydiv.textContent = "Friends Only";
                        friendsonlydiv.style.lineHeight = "0";
                        friendsonlydiv.style.textAlign = "center";
                        friendsonlydiv.style.width = "100vw";
                        friendsonlydiv.style.transform = "translate(0, 20px)";
                        friendsonlydiv.style.maxWidth = "750px";

                        newDiv.appendChild(friendsonlydiv);
                    }

                    document.getElementById("friends_only").checked = false;


                    document.getElementById("newpostsarea").prepend(newDiv);

                    document.querySelector(".post" + increment).appendChild(image);

                    document.querySelector(".post" + increment).appendChild(div);
                    document.querySelector(".left" + increment).appendChild(invite_text2);
                    document.querySelector(".left" + increment).appendChild(time);

                    document.querySelector(".post" + increment).appendChild(link);

                    document.querySelector(".post" + increment).appendChild(invite_text);

                    if (match != undefined) {
                        document.querySelector(".post" + increment).appendChild(video);

                    }

                    if (document.getElementById("imageinput").value != "") {
                        document.querySelector(".post" + increment).appendChild(actualimageparent);
                        actualimageparent.appendChild(actualimagediv);
                        actualimageparent.appendChild(actualimage);
                        actualimage.style.transform = "translate(-50%, -50%)"

                        actualimagediv.style.height = actualimage.offsetHeight + "px";

                        

                        actualimagediv.style.maxHeight = "500px";
                        actualimage.style.maxHeight = "500px";

                        actualimage.onload = function() {
                            actualimagediv.style.height = actualimage.offsetHeight + "px";

                            actualimagediv.style.maxHeight = "500px";
                            actualimage.style.maxHeight = "500px";
                        }

                        function resize() {
                            actualimagediv.style.height = actualimage.offsetHeight + "px";

                            actualimagediv.style.maxHeight = "500px";
                            actualimage.style.maxHeight = "500px";
                        }
                        resize();

                        window.addEventListener('resize', resize);
                        window.addEventListener('scroll', resize);
                    }

                    if (document.getElementById("imageinput").value == "" && match == undefined) {
                        document.querySelector(".post" + increment).appendChild(hr);
                    }

                    document.querySelector(".post" + increment).appendChild(likesdiv);
                    document.querySelector(".likesdiv" + increment).appendChild(like);
                    document.querySelector(".likesdiv" + increment).appendChild(dislike);
                    document.querySelector(".likesdiv" + increment).appendChild(visit);
                    document.querySelector(".likesdiv" + increment).appendChild(like2);
                    document.querySelector(".likesdiv" + increment).appendChild(dislike2);


                    invite_text.style.height = (invite_text.scrollHeight) + 'px';

                    newDiv.style.minHeight = "0";
                    newDiv.style.overflow = "hidden"
                    newDiv.style.height = "0px";
                    newDiv.style.transition = "height 0.2s"; 
                    if (!navigator.userAgent.includes("Firefox")) {
                        requestAnimationFrame(() => {
                            newDiv.style.height = newDiv.scrollHeight + actualimage.offsetHeight + "px";
                        });
                    } else {
                        requestAnimationFrame(() => {
                            newDiv.style.height = newDiv.scrollHeight + "px";
                        });
                    }












                    }
            </script>


            <div id="newpost" style="display: none;" onclick="{{ newposts }}">no_new_posts</div>

        
        </div>
    </div>



            </div>
            


        </div>
    </div>
    


    <script>
        function updateposition() {
          const div1 = document.querySelector(".mainbox");
          const div2 = document.querySelector(".posts");

      
          const position = div1.getBoundingClientRect();
          const scrolltop = window.scrollY || document.documentElement.scrollTop;
      
          div2.style.top = `${position.bottom + scrolltop + 10}px`;
        }
      
        updateposition();
      
        setInterval(updateposition, 0);
    </script>


</body>
</html>
